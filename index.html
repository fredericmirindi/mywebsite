<!DOCTYPE html>
<html lang="en" class="dark">
<head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-REQNTPLBJK"></script>
        <script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'G-REQNTPLBJK');
                </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frédéric Mirindi | PhD Candidate Economics</title>
            <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

            <!-- Schema.org Structured Data for SEO -->
            <script type="application/ld+json">
                        {
                          "@context": "https://schema.org",
                          "@type": "Person",
                          "name": "Frédéric Mirindi",
                          "givenName": "Frédéric",
                          "familyName": "Mirindi",
                          "jobTitle": "Economist",
                          "description": "Canadian Economist and PhD Candidate in Economics and Econometrics at the University of Manitoba",
                          "nationality": "Canadian",
                          "url": "https://fredericmirindi.com",
                          "image": "https://fredericmirindi.com/images/fredericprofil.jpeg",
                          "alumniOf": {
                            "@type": "EducationalOrganization",
                            "name": "University of Manitoba"
                          },
                          "affiliation": {
                            "@type": "Organization",
                            "name": "University of Manitoba"
                          },
                          "sameAs": [
                            "https://www.linkedin.com/in/fredericmirindi",
                            "https://scholar.google.com/citations?user=K5--CxAAAAAJ",
                            "https://www.researchgate.net/profile/Frederic-Mirindi",
                            "https://orcid.org/0009-0001-1798-9914"
                          ]
                        }
                        </script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: "var(--glass-border)",
                    }
                }
            }
        }
    </script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

    <style>
        :root {
            --bg-color: #050505; 
            --text-main: #ffffff;
            --text-muted: #a3a3a3;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.15);
            --accent-color: #22d3ee; 
            --accent-hover: #06b6d4;
            --gradient-start: #ffffff;
            --gradient-end: #22d3ee; 
        }

        html.light {
            --bg-color: #fafafa;
            --text-main: #171717;
            --text-muted: #525252;
            --glass-bg: rgba(0, 0, 0, 0.03);
            --glass-border: rgba(0, 0, 0, 0.1);
            --accent-color: #b45309; 
            --accent-hover: #78350f;
            --gradient-start: #171717;
            --gradient-end: #b45309; 
        }

        body {
            font-family: 'Abadi', 'Abadi MT Condensed Light', 'Questrial', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            overflow-x: hidden;
            margin: 0;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        h1, h2, h3, h4 {
            font-family: 'Abadi', 'Abadi MT Condensed Light', sans-serif;
            letter-spacing: 0.03em;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: var(--bg-color); 
            transition: background-color 0.5s ease;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.2);
        }

        /* Navigation & Page Visibility Logic */
        .nav-link {
            position: relative;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--text-main);
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        /* STRICT PAGE HIDING */
        .page-section {
            display: none;
            animation: fadeIn 0.5s ease-out forwards;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .text-accent { color: var(--accent-color); }

        .text-gradient-innovative {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .btn-primary {
            background: transparent;
            border: 1px solid var(--text-main);
            color: var(--text-main);
            position: relative;
            overflow: hidden;
            z-index: 1;
            transition: color 0.3s ease;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--accent-color);
            z-index: -1;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .btn-primary:hover::before { transform: scaleX(1); }
        .btn-primary:hover { color: var(--bg-color); border-color: var(--accent-color); }

        .theme-toggle {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: var(--text-main);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .theme-toggle:hover {
            background: var(--glass-bg);
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        /* Inputs for Apps */
        .app-input {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-main);
            padding: 0.5rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        .app-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-color); }
    </style>

      <!-- JSON-LD Structured Data for SEO -->
      <script type="application/ld+json">
            {
              "@context": "https://schema.org",
              "@type": "Person",
              "name": "Frédéric Mirindi",
              "alternateName": "Frederic Mirindi",
              "givenName": "Frédéric",
              "familyName": "Mirindi",
              "url": "https://fredericmirindi.com",
              "image": "https://raw.githubusercontent.com/fredericmirindi/frederic.mirindi/main/images/fredericprofil.jpeg",
              "jobTitle": "PhD Candidate in Economics and Econometrics",
              "description": "Canadian Economist and PhD Candidate in Economics and Econometrics at the University of Manitoba. Lecturer at Université de Saint-Boniface and Booth University College.",
              "email": "frederic.mirindi@umanitoba.ca",
              "affiliation": [
                {
                  "@type": "Organization",
                  "name": "University of Manitoba",
                  "url": "https://umanitoba.ca"
                },
                {
                  "@type": "Organization",
                  "name": "Booth University College",
                  "url": "https://boothuc.ca"
                },
                {
                  "@type": "Organization",
                  "name": "Université de Saint-Boniface"
                }
              ],
              "sameAs": [
                "https://ca.linkedin.com/in/fredericmirindi",
                "https://scholar.google.com/citations?user=K5--CxAAAAAJ",
                "https://orcid.org/0009-0001-1798-9914",
                "https://www.researchgate.net/profile/Frederic-Mirindi"
              ]
            }
            </script>
</head>
<body class="antialiased">

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 top-0 border-b border-[var(--glass-border)] bg-[var(--glass-bg)] backdrop-blur-md transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0 cursor-pointer" onclick="navigateTo('home')">
                    <h1 class="text-2xl font-bold tracking-wider text-gradient-innovative">Frédéric Mirindi</h1>
                </div>
                
                <!-- Desktop Menu (Visible on Desktop 'md:flex', Hidden on Mobile 'hidden') -->
                <div class="hidden md:flex items-center space-x-6">
                    <div class="flex items-baseline space-x-6">
                        <button onclick="navigateTo('home')" class="nav-link active text-sm font-medium" id="nav-home">Home</button>
                        <button onclick="navigateTo('research')" class="nav-link text-sm font-medium" id="nav-research">Research</button>
                        <button onclick="navigateTo('teaching')" class="nav-link text-sm font-medium" id="nav-teaching">Teaching</button>
                        <button onclick="navigateTo('publications')" class="nav-link text-sm font-medium" id="nav-publications">Publications</button>
                        <button onclick="navigateTo('applications')" class="nav-link text-sm font-medium" id="nav-applications">Apps</button>
                        <button onclick="navigateTo('blog')" class="nav-link text-sm font-medium" id="nav-blog">Blog</button>
                        <button onclick="navigateTo('contacts')" class="nav-link text-sm font-medium" id="nav-contacts">Contact</button>
                    </div>
                    
                    <!-- Social Icons (Desktop) -->
                    <div class="flex items-center gap-3 ml-4 border-l border-[var(--glass-border)] pl-4">
                        <a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" class="text-[var(--text-muted)] hover:text-[var(--accent-color)] transition-colors text-xl">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>

                    <!-- Theme Toggle Button -->
                    <button onclick="toggleTheme()" class="theme-toggle ml-4" id="theme-toggle-btn" aria-label="Toggle Dark/Light Mode">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                </div>

                <!-- Mobile Menu Button (Visible on Mobile 'flex', Hidden on Desktop 'md:hidden') -->
                <div class="-mr-2 flex md:hidden items-center gap-4">
                    <button onclick="toggleTheme()" class="theme-toggle" aria-label="Toggle Dark/Light Mode">
                        <i class="fas fa-moon" id="theme-icon-mobile"></i>
                    </button>
                    <button onclick="toggleMobileMenu()" id="mobile-menu-btn" class="inline-flex items-center justify-center p-2 rounded-md text-[var(--text-muted)] hover:text-[var(--text-main)] focus:outline-none">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu (Hidden by default, hidden on desktop 'md:hidden') -->
        <div class="hidden md:hidden bg-[var(--bg-color)] border-b border-[var(--glass-border)] absolute w-full left-0 top-20 z-40" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-[var(--bg-color)] shadow-lg">
                <button onclick="navigateTo('home')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Home</button>
                <button onclick="navigateTo('research')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Research</button>
                <button onclick="navigateTo('teaching')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Teaching</button>
                <button onclick="navigateTo('publications')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Publications</button>
                <button onclick="navigateTo('applications')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Apps</button>
                <button onclick="navigateTo('blog')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Blog</button>
                <button onclick="navigateTo('contacts')" class="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-muted)] hover:text-[var(--text-main)] w-full text-left hover:bg-[var(--glass-bg)] transition-colors">Contact</button>
                <div class="flex gap-4 px-3 py-4 mt-2 border-t border-[var(--glass-border)] pt-4">
                    <a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" class="text-[var(--text-muted)] hover:text-[var(--accent-color)] text-xl"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto relative z-10 min-h-screen">
        
        <!-- HOME PAGE -->
        <section id="home" class="page-section active">
            <div class="min-h-[calc(100vh-6rem)] flex flex-col justify-center pt-10 md:pt-0">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6 text-center md:text-left">
                        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-[var(--text-main)] leading-tight">
                            Exploring the Frontiers of <br>
                            <span class="text-gradient-innovative">Game Theory, Machine Learning & Macroeconometrics.</span>
                        </h1>
                        <p class="text-base sm:text-lg text-[var(--text-muted)] max-w-lg leading-relaxed mx-auto md:mx-0">
                            <strong class="text-[var(--text-main)]">Frédéric Mirindi</strong> is a Canadian Economist and 
                            PhD Candidate in Economics and Econometrics at the University of Manitoba.
                            <br><br>
                            He serves as a Lecturer at Université de Saint-Boniface and Booth University College, bringing industry experience from his previous role as a Data Scientist at Canada Life.
                        </p>
                        <p class="text-sm sm:text-base text-[var(--text-muted)] border-l-2 border-[var(--accent-color)] pl-4 text-left">
                            Specializing in time-series analysis, macro-econometric modeling, and predictive analytics for complex market systems.
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 pt-4 justify-center md:justify-start">
                            <button onclick="navigateTo('research')" class="px-8 py-3 btn-primary rounded-lg font-semibold transition w-full sm:w-auto">
                                View Research
                            </button>
                            <button onclick="navigateTo('applications')" class="px-8 py-3 glass-card text-[var(--text-main)] rounded-lg font-semibold transition hover:bg-[var(--glass-bg)] w-full sm:w-auto">
                                Try Apps
                            </button>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex gap-6 pt-6 text-[var(--text-muted)] items-center justify-center md:justify-start">
                            <a href="https://orcid.org/0009-0001-1798-9914" target="_blank" title="ORCID" style="color: #A6CE39;" class="hover:opacity-80 transition text-3xl">
                                <i class="fab fa-orcid"></i>
                            </a>
                            <a href="https://www.researchgate.net/profile/Frederic-Mirindi" target="_blank" title="ResearchGate" style="color: #00CCBB;" class="hover:opacity-80 transition text-3xl">
                                <i class="fab fa-researchgate"></i>
                            </a>
                            <a href="https://scholar.google.com/citations?hl=fr&user=K5--CxAAAAAJ&view_op=list_works&sortby=pubdate" target="_blank" title="Google Scholar" style="color: #4285F4;" class="hover:opacity-80 transition text-3xl">
                                <i class="fas fa-graduation-cap"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Profile Picture -->
                    <div class="flex justify-center items-center md:justify-end">
                             <div class="relative w-48 h-48 sm:w-64 sm:h-64 md:w-80 md:h-80 rounded-full p-1 bg-gradient-to-tr from-[var(--glass-border)] to-[var(--accent-color)]/50 shadow-2xl shadow-[var(--accent-color)]/20">
                                <div class="w-full h-full rounded-full overflow-hidden border-4 border-[var(--bg-color)] relative z-10 bg-[var(--bg-color)]">
                                    <img src="https://raw.githubusercontent.com/fredericmirindi/frederic.mirindi/main/images/fredericprofil.jpeg" 
                                             alt="Frédéric Mirindi" 
                                             class="w-full h-full object-cover hover:scale-110 transition-transform duration-700 ease-in-out">
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESEARCH PAGE -->
        <section id="research" class="page-section">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gradient-innovative mb-4">Research Fields</h2>
                <p class="text-[var(--text-muted)] max-w-2xl mx-auto">My current work bridges the gap between theoretical economic frameworks and rigorous statistical validation.</p>
            </div>

            <!-- Current Position Card -->
            <div class="glass-card p-8 rounded-2xl mb-12 border-l-4 border-green-500 relative overflow-hidden">
                <div class="absolute right-0 top-0 w-32 h-32 bg-green-500/10 rounded-full blur-2xl -mr-16 -mt-16 pointer-events-none"></div>
                <div class="relative z-10">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-xs font-bold uppercase tracking-wide">Current Role</span>
                        <span class="text-[var(--text-muted)] text-sm"><i class="far fa-calendar-alt mr-1"></i> Since October 2025</span>
                    </div>
                    <h3 class="text-2xl font-bold text-[var(--text-main)] mb-2">Researcher at Université de Saint-Boniface</h3>
                    <p class="text-[var(--text-muted)] text-lg leading-relaxed">
                        I am currently leading research projects focused on the <strong>macroeconomic impact of immigration in Manitoba</strong>. My work analyzes labor market integration, fiscal contributions, and the long-term economic resilience provided by newcomer populations in the province.
                    </p>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-16">
                <div class="glass-card p-8 rounded-2xl group">
                    <div class="w-12 h-12 border border-[var(--glass-border)] rounded-lg flex items-center justify-center text-[var(--text-main)] mb-6 text-xl group-hover:border-[var(--accent-color)] group-hover:text-[var(--accent-color)] transition-colors">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="text-xl font-bold text-[var(--text-main)] mb-3">Time Series Econometrics</h3>
                    <p class="text-[var(--text-muted)] text-sm leading-relaxed">
                        Developing robust models for non-stationary data, focusing on structural breaks and long-memory processes in financial markets.
                    </p>
                </div>
                <div class="glass-card p-8 rounded-2xl group">
                    <div class="w-12 h-12 border border-[var(--glass-border)] rounded-lg flex items-center justify-center text-[var(--text-main)] mb-6 text-xl group-hover:border-[var(--accent-color)] group-hover:text-[var(--accent-color)] transition-colors">
                        <i class="fas fa-globe-americas"></i>
                    </div>
                    <h3 class="text-xl font-bold text-[var(--text-main)] mb-3">Macroeconomic Policy</h3>
                    <p class="text-[var(--text-muted)] text-sm leading-relaxed">
                        Analyzing the transmission mechanisms of monetary policy shocks in emerging economies using Bayesian VAR approaches.
                    </p>
                </div>
                <div class="glass-card p-8 rounded-2xl group">
                    <div class="w-12 h-12 border border-[var(--glass-border)] rounded-lg flex items-center justify-center text-[var(--text-main)] mb-6 text-xl group-hover:border-[var(--accent-color)] group-hover:text-[var(--accent-color)] transition-colors">
                        <i class="fas fa-code-branch"></i>
                    </div>
                    <h3 class="text-xl font-bold text-[var(--text-main)] mb-3">Computational Economics</h3>
                    <p class="text-[var(--text-muted)] text-sm leading-relaxed">
                        Leveraging machine learning techniques to enhance forecasting accuracy for high-dimensional economic datasets.
                    </p>
                </div>
            </div>

            <!-- Technical Skills / Tech Stack Visualization -->
            <div class="mb-16">
                <h3 class="text-2xl font-bold text-center text-[var(--text-main)] mb-8">Technical Proficiency</h3>
                <div class="flex flex-wrap justify-center gap-4 md:gap-6">
                    <!-- Python -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <i class="fab fa-python text-2xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors"></i>
                        <span class="font-medium text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors">Python</span>
                    </div>
                    <!-- R -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <i class="fab fa-r-project text-2xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors"></i>
                        <span class="font-medium text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors">R</span>
                    </div>
                    <!-- Stata -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <i class="fas fa-chart-bar text-2xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors"></i>
                        <span class="font-medium text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors">Stata</span>
                    </div>
                    <!-- MATLAB -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <i class="fas fa-square-root-variable text-2xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors"></i>
                        <span class="font-medium text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors">MATLAB</span>
                    </div>
                    <!-- LaTeX -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <span class="font-serif font-bold text-xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors">LaTeX</span>
                    </div>
                    <!-- EViews -->
                    <div class="glass-card px-6 py-3 rounded-full flex items-center gap-3 hover:border-[var(--accent-color)] transition-all group cursor-default">
                        <i class="fas fa-chart-line text-2xl text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors"></i>
                        <span class="font-medium text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors">EViews</span>
                    </div>
                </div>
            </div>

            <!-- OPEN DATA & CODE SUBSECTION -->
            <div class="glass-card p-8 rounded-2xl mb-16 flex flex-col md:flex-row items-center justify-between gap-6 relative overflow-hidden group">
                <!-- Decorative background element -->
                <div class="absolute right-0 top-0 w-64 h-64 bg-[var(--accent-color)] opacity-5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"></div>
                
                <div class="relative z-10">
                    <h3 class="text-2xl font-bold text-[var(--text-main)] mb-2 flex items-center gap-3">
                        <i class="fas fa-database text-[var(--accent-color)]"></i> Open Data & Code
                    </h3>
                    <p class="text-[var(--text-muted)] max-w-xl text-sm leading-relaxed">
                        I am committed to the principles of <strong>reproducible research</strong>. Access replication packages, pre-processed datasets, and custom econometric algorithms for my working papers and publications.
                    </p>
                </div>
                <a href="https://github.com/" target="_blank" class="relative z-10 px-6 py-3 border border-[var(--glass-border)] hover:border-[var(--accent-color)] bg-[var(--bg-color)]/50 text-[var(--text-main)] rounded-lg transition flex items-center gap-3 group-hover:shadow-lg shadow-[var(--accent-color)]/10">
                    <i class="fab fa-github text-2xl group-hover:text-[var(--accent-color)] transition-colors"></i>
                    <span class="font-semibold">View Repository</span>
                </a>
            </div>

            <div class="mt-16">
                <h3 class="text-2xl font-bold text-[var(--text-main)] mb-6 text-center">Conferences & Seminars</h3>

                <!-- CONFERENCE PHOTO CAROUSEL -->
                <div class="relative w-full max-w-3xl mx-auto h-80 rounded-xl overflow-hidden mb-8 group glass-card border border-[var(--glass-border)]">
                    <!-- Slide 1: Oxford -->
                    <div class="carousel-slide absolute inset-0 transition-opacity duration-700 opacity-100" id="slide-0">
                        <img src="https://raw.githubusercontent.com/fredericmirindi/frederic.mirindi/main/images/cea.JPG" alt="Oxford Seminar" class="w-full h-full object-cover opacity-80 hover:opacity-100 transition-opacity duration-500">
                        <div class="absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 border-t border-[var(--glass-border)]">
                            <p class="text-white font-semibold text-sm"><i class="fas fa-university text-[var(--accent-color)] mr-2"></i>University of Oxford Graduate Seminar (2024)</p>
                        </div>
                    </div>
                    <!-- Slide 2: Athens -->
                    <div class="carousel-slide absolute inset-0 transition-opacity duration-700 opacity-0" id="slide-1">
                        <img src="https://raw.githubusercontent.com/fredericmirindi/frederic.mirindi/main/images/mabble.jpg" alt="Athens Conference" class="w-full h-full object-cover opacity-80 hover:opacity-100 transition-opacity duration-500">
                        <div class="absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 border-t border-[var(--glass-border)]">
                            <p class="text-white font-semibold text-sm"><i class="fas fa-globe-europe text-[var(--accent-color)] mr-2"></i>MARBLE 2025 Conference, Athens</p>
                        </div>
                    </div>

                    <!-- Controls -->
                    <button onclick="changeSlide(-1)" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-[var(--accent-color)] text-white p-3 rounded-full opacity-0 group-hover:opacity-100 transition-all border border-white/20 cursor-pointer">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button onclick="changeSlide(1)" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-[var(--accent-color)] text-white p-3 rounded-full opacity-0 group-hover:opacity-100 transition-all border border-white/20 cursor-pointer">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Item 1 -->
                    <div class="glass-card p-6 rounded-xl flex flex-col">
                        <div class="flex justify-between items-start mb-3">
                            <div class="inline-block px-2 py-1 rounded-md bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold">MARBLE 2025</div>
                            <span class="text-[var(--text-muted)] text-xs italic">July 1–3, 2025</span>
                        </div>
                        <h4 class="text-lg font-semibold text-[var(--text-main)] mb-2 leading-tight">“Adaptive Proof-of-Stake Governance: A Game-Theoretic Approach to Consensus Mechanisms.”</h4>
                        <p class="text-[var(--text-muted)] text-sm mt-auto">
                            <strong>Mirindi, F.</strong><br>
                            MARBLE2025 – 6th International Conference on Mathematical Research for Blockchain Economics, Amalia Hotel, Athens, Greece.
                        </p>
                    </div>
                    <!-- Item 2 -->
                    <div class="glass-card p-6 rounded-xl flex flex-col">
                        <div class="flex justify-between items-start mb-3">
                            <div class="inline-block px-2 py-1 rounded-md bg-purple-500/10 border border-purple-500/20 text-purple-400 text-xs font-bold">Oxford Seminar</div>
                            <span class="text-[var(--text-muted)] text-xs italic">November 27, 2024</span>
                        </div>
                        <h4 class="text-lg font-semibold text-[var(--text-main)] mb-2 leading-tight">“From Rubber to Cobalt: Evolution of Exploitation Forms and Social Impacts in the Democratic Republic of Congo.”</h4>
                        <p class="text-[var(--text-muted)] text-sm mt-auto">
                            <strong>Mirindi, F.</strong><br>
                            Graduate Seminars in Economic and Social History, University of Oxford.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- APPLICATIONS PAGE (NEW) -->
        <section id="applications" class="page-section">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gradient-innovative mb-4">Interactive Tools</h2>
                <p class="text-[var(--text-muted)] max-w-2xl mx-auto">Web-based applications for econometric analysis and financial simulation.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                
                <!-- Tool 1: Simple OLS Regressor -->
                <div class="glass-card p-8 rounded-2xl border-t-4 border-green-500">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="bg-green-500/10 p-3 rounded-lg text-green-400"><i class="fas fa-calculator text-xl"></i></div>
                        <h3 class="text-xl font-bold text-[var(--text-main)]">Simple OLS Regressor</h3>
                    </div>
                    <p class="text-[var(--text-muted)] text-sm mb-4">Enter comma-separated values to calculate the slope (β) and intercept (α) for a simple linear regression model: <i>y = α + βx</i>.</p>
                    
                    <label class="text-xs text-[var(--text-muted)]">Variable X (Independent)</label>
                    <input type="text" id="ols-x" class="app-input" placeholder="e.g., 1, 2, 3, 4, 5" value="1, 2, 3, 4, 5">
                    
                    <label class="text-xs text-[var(--text-muted)]">Variable Y (Dependent)</label>
                    <input type="text" id="ols-y" class="app-input" placeholder="e.g., 2, 3.5, 4.5, 7, 9" value="2, 3.5, 4.5, 7, 9">
                    
                    <button onclick="calculateOLS()" class="w-full btn-primary py-2 rounded mb-4 cursor-pointer hover:bg-[var(--accent-color)] hover:text-white transition-colors">Calculate Model</button>
                    
                    <div id="ols-result" class="hidden p-4 bg-[var(--bg-color)] rounded border border-[var(--glass-border)] mt-4">
                        <p class="text-sm font-mono text-[var(--text-main)] mb-3 border-b border-[var(--glass-border)] pb-2">Equation: <span id="ols-equation" class="text-[var(--accent-color)] font-bold"></span></p>
                        <div class="grid grid-cols-2 gap-y-2 gap-x-4 text-xs text-[var(--text-muted)]">
                            <div>R-Squared (R²): <span id="ols-r2" class="text-[var(--text-main)] font-mono"></span></div>
                            <div>Std. Error (ε): <span id="ols-se" class="text-[var(--text-main)] font-mono"></span></div>
                            <div>t-stat (Slope): <span id="ols-tstat" class="text-[var(--text-main)] font-mono"></span></div>
                            <div>Observations (n): <span id="ols-n" class="text-[var(--text-main)] font-mono"></span></div>
                        </div>
                    </div>
                </div>

                <!-- Tool 2: Purchasing Power Simulator -->
                <div class="glass-card p-8 rounded-2xl border-t-4 border-red-500">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="bg-red-500/10 p-3 rounded-lg text-red-400"><i class="fas fa-money-bill-wave text-xl"></i></div>
                        <h3 class="text-xl font-bold text-[var(--text-main)]">Inflation Impact Simulator</h3>
                    </div>
                    <p class="text-[var(--text-muted)] text-sm mb-4">Visualize how inflation erodes the real value of your cash holdings over time based on a constant inflation assumption.</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs text-[var(--text-muted)]">Current Amount ($)</label>
                            <input type="number" id="inf-amount" class="app-input" value="1000">
                        </div>
                        <div>
                            <label class="text-xs text-[var(--text-muted)]">Inflation Rate (%)</label>
                            <input type="number" id="inf-rate" class="app-input" value="3.5" step="0.1">
                        </div>
                    </div>
                    <label class="text-xs text-[var(--text-muted)]">Time Horizon (Years)</label>
                    <input type="range" id="inf-years" min="1" max="30" value="10" class="w-full mb-2 accent-[var(--accent-color)]">
                    <div class="text-right text-xs text-[var(--text-muted)] mb-4"><span id="inf-years-val">10</span> Years</div>

                    <div class="p-4 bg-[var(--bg-color)] rounded border border-[var(--glass-border)] text-center">
                        <p class="text-xs text-[var(--text-muted)]">Future Real Value</p>
                        <p class="text-2xl font-bold text-[var(--accent-color)]" id="inf-result">Loading...</p>
                        <p class="text-xs text-red-400 mt-1">Loss of Purchasing Power: <span id="inf-loss"></span>%</p>
                    </div>
                </div>

                <!-- Tool 3: Compound Growth Visualizer -->
                <div class="glass-card p-8 rounded-2xl border-t-4 border-blue-500 md:col-span-2">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-blue-500/10 p-3 rounded-lg text-blue-400"><i class="fas fa-chart-bar text-xl"></i></div>
                            <h3 class="text-xl font-bold text-[var(--text-main)]">Compound Growth Visualizer</h3>
                        </div>
                        <!-- New Feature: Summary Breakdown -->
                        <div class="text-right hidden md:block">
                            <p class="text-xs text-[var(--text-muted)]">Total Principal</p>
                            <p id="summary-principal" class="font-mono text-[var(--text-main)]">$0</p>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="space-y-3">
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Initial Principal ($)</label>
                                <input type="number" id="comp-principal" class="app-input" value="5000">
                            </div>
                            
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Contribution ($)</label>
                                <input type="number" id="comp-contrib" class="app-input" value="200">
                            </div>

                            <!-- New Feature: Frequency Toggle -->
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Frequency</label>
                                <select id="comp-freq" class="app-input cursor-pointer">
                                    <option value="12">Monthly</option>
                                    <option value="1">Annually</option>
                                </select>
                            </div>

                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Annual Return (%)</label>
                                <input type="number" id="comp-rate" class="app-input" value="7">
                            </div>

                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Time Horizon (Years)</label>
                                <input type="number" id="comp-years" class="app-input" value="20" max="50">
                            </div>
                            
                            <button onclick="calculateCompound()" class="w-full btn-primary py-2 rounded mt-2 cursor-pointer hover:bg-[var(--accent-color)] hover:text-white transition-colors">Visualize Growth</button>
                        </div>
                        
                        <div class="md:col-span-2 flex flex-col justify-end min-h-[300px]">
                            <!-- Graph Container -->
                            <div class="relative h-64 w-full border-l border-b border-[var(--glass-border)]">
                                <div id="compound-chart" class="absolute inset-0 flex items-end justify-between px-2 gap-1">
                                    <!-- Bars injected here -->
                                </div>
                                <!-- Grid Lines (Visual Aid) -->
                                <div class="absolute inset-0 flex flex-col justify-between pointer-events-none opacity-20">
                                    <div class="w-full h-px bg-[var(--text-muted)]"></div>
                                    <div class="w-full h-px bg-[var(--text-muted)]"></div>
                                    <div class="w-full h-px bg-[var(--text-muted)]"></div>
                                    <div class="w-full h-px bg-[var(--text-muted)]"></div>
                                    <div class="w-full h-px bg-transparent"></div> <!-- spacer -->
                                </div>
                            </div>
                            
                            <div class="flex justify-between text-xs text-[var(--text-muted)] mt-2 font-mono">
                                <span>Year 0</span>
                                <span id="final-total-label" class="text-[var(--accent-color)] font-bold">Total: $0</span>
                            </div>
                            
                            <!-- Legend -->
                            <div class="flex gap-4 mt-4 text-xs justify-center">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-[var(--text-muted)] opacity-30"></div>
                                    <span class="text-[var(--text-muted)]">Principal</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-[var(--accent-color)]"></div>
                                    <span class="text-[var(--text-main)]">Interest</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tool 4: Monte Carlo Portfolio Simulator (Existing) -->
                 <div class="glass-card p-8 rounded-2xl border-t-4 border-purple-500 md:col-span-2 mt-8">
                    <!-- ... (Monte Carlo content same as before) ... -->
                    <div class="flex items-center gap-4 mb-6">
                        <div class="bg-purple-500/10 p-3 rounded-lg text-purple-400"><i class="fas fa-random text-xl"></i></div>
                        <h3 class="text-xl font-bold text-[var(--text-main)]">Monte Carlo Portfolio Simulator</h3>
                    </div>
                    <p class="text-[var(--text-muted)] text-sm mb-4">Simulate 50 potential market scenarios based on expected return and volatility. See the range of possible outcomes.</p>
                    
                    <div class="grid md:grid-cols-3 gap-6">
                        <!-- ... (inputs and canvas same as before) ... -->
                        <div class="space-y-3">
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Initial Investment ($)</label>
                                <input type="number" id="mc-principal" class="app-input" value="10000">
                            </div>
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Expected Annual Return (%)</label>
                                <input type="number" id="mc-mean" class="app-input" value="8">
                            </div>
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Volatility (Std Dev %)</label>
                                <input type="number" id="mc-vol" class="app-input" value="15">
                            </div>
                            <div>
                                <label class="text-xs text-[var(--text-muted)]">Years</label>
                                <input type="number" id="mc-years" class="app-input" value="10" max="30">
                            </div>
                            <button onclick="runMonteCarlo()" class="w-full btn-primary py-2 rounded mt-2 cursor-pointer hover:bg-purple-500 hover:text-white transition-colors">Run Simulation</button>
                        </div>
                        
                        <div class="md:col-span-2">
                            <div class="relative h-64 w-full border-l border-b border-[var(--glass-border)] bg-black/20 rounded p-2 overflow-hidden">
                                <canvas id="mc-canvas" class="w-full h-full block"></canvas>
                            </div>
                            <div class="grid grid-cols-3 gap-4 text-center mt-4 text-xs">
                                <div class="p-2 rounded bg-red-900/20 border border-red-500/30">
                                    <div class="text-red-400 font-bold">Worst Case (5th %ile)</div>
                                    <div id="mc-worst" class="font-mono text-[var(--text-main)]">---</div>
                                </div>
                                <div class="p-2 rounded bg-gray-800/50 border border-[var(--glass-border)]">
                                    <div class="text-[var(--text-muted)] font-bold">Median Case</div>
                                    <div id="mc-median" class="font-mono text-[var(--text-main)]">---</div>
                                </div>
                                <div class="p-2 rounded bg-green-900/20 border border-green-500/30">
                                    <div class="text-green-400 font-bold">Best Case (95th %ile)</div>
                                    <div id="mc-best" class="font-mono text-[var(--text-main)]">---</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW IMPROVED: Crypto & AI Asset Tracker -->
                <div class="glass-card p-8 rounded-2xl border-t-4 border-cyan-500 md:col-span-2 mt-8">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-cyan-500/10 p-3 rounded-lg text-cyan-400"><i class="fas fa-chart-pie text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-bold text-[var(--text-main)]">Market Pulse: Crypto & AI</h3>
                                <p class="text-xs text-[var(--text-muted)]">Real-time tracking of top digital assets and AI equities</p>
                            </div>
                        </div>
                        <span class="text-[var(--text-muted)] text-xs italic flex items-center gap-2">
                            <span class="relative flex h-2 w-2">
                              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                            </span>
                            Live Stream
                        </span>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        
                        <!-- Top 5 Cryptocurrencies (Real Data via CoinGecko) -->
                        <div class="bg-[var(--bg-color)]/50 rounded-xl border border-[var(--glass-border)] p-0 overflow-hidden">
                            <div class="p-4 border-b border-[var(--glass-border)] bg-[var(--glass-bg)] flex justify-between items-center">
                                <h4 class="text-sm font-bold text-[var(--text-main)]"><i class="fab fa-bitcoin text-orange-500 mr-2"></i> Crypto Assets</h4>
                                <span class="text-[10px] text-[var(--text-muted)] uppercase tracking-wider">24H Trend</span>
                            </div>
                            <div id="crypto-list" class="divide-y divide-[var(--glass-border)]">
                                <!-- Items injected by JS -->
                                <div class="p-4 text-center text-xs text-[var(--text-muted)]">Loading market data...</div>
                            </div>
                        </div>

                        <!-- Top 5 AI Assets (Simulated Live Data) -->
                        <div class="bg-[var(--bg-color)]/50 rounded-xl border border-[var(--glass-border)] p-0 overflow-hidden">
                             <div class="p-4 border-b border-[var(--glass-border)] bg-[var(--glass-bg)] flex justify-between items-center">
                                <h4 class="text-sm font-bold text-[var(--text-main)]"><i class="fas fa-robot text-purple-500 mr-2"></i> AI & Tech Equities</h4>
                                <span class="text-[10px] text-[var(--text-muted)] uppercase tracking-wider">Live Simulation</span>
                            </div>
                            <div id="stock-list" class="divide-y divide-[var(--glass-border)]">
                                <!-- Items injected by JS -->
                                <div class="p-4 text-center text-xs text-[var(--text-muted)]">Connecting to exchange...</div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- TEACHING PAGE (Full) -->
        <section id="teaching" class="page-section">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gradient-innovative mb-4">Teaching Experience</h2>
                <p class="text-[var(--text-muted)] max-w-2xl mx-auto">Educating the next generation of economists and mathematicians.</p>
            </div>

            <div class="space-y-8 max-w-4xl mx-auto">
                <!-- Booth University College -->
                <div class="glass-card p-8 rounded-2xl border-l-4 border-[var(--accent-color)] relative overflow-hidden">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-[var(--text-main)]">Booth University College</h3>
                            <p class="text-[var(--accent-color)] font-medium">Sessional Instructor | Winnipeg</p>
                        </div>
                        <div class="mt-2 md:mt-0 bg-[var(--glass-bg)] px-4 py-1 rounded-full text-sm text-[var(--text-main)] border border-[var(--glass-border)]">
                            September 2024 – Present
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- ECO110 -->
                            <div class="border border-[var(--glass-border)] p-4 rounded-lg hover:border-[var(--accent-color)] transition-colors relative group">
                                <h4 class="text-[var(--text-main)] font-semibold">ECO110 — Introduction to Microeconomics</h4>
                                <p class="text-[var(--text-muted)] text-xs mt-1">Oct 2024–May 2025 | Class size: 15–25</p>
                                <button onclick="navigateTo('eco110-practice')" class="mt-3 w-full bg-[var(--accent-color)]/10 hover:bg-[var(--accent-color)]/20 text-[var(--accent-color)] text-xs py-2 rounded border border-[var(--accent-color)]/20 transition-all flex items-center justify-center gap-2">
                                    <i class="fas fa-laptop-code"></i> Practice Problem Set
                                </button>
                            </div>
                            <!-- MAT100 -->
                            <div class="border border-[var(--glass-border)] p-4 rounded-lg hover:border-[var(--accent-color)] transition-colors relative group">
                                <h4 class="text-[var(--text-main)] font-semibold">MAT100 — Applied Finite Mathematics</h4>
                                <p class="text-[var(--text-muted)] text-xs mt-1">Jan 2025–May 2025 | Class size: 15–25</p>
                                <!-- New Button for MAT100 Problem Set -->
                                <button onclick="navigateTo('mat100-practice')" class="mt-3 w-full bg-[var(--accent-color)]/10 hover:bg-[var(--accent-color)]/20 text-[var(--accent-color)] text-xs py-2 rounded border border-[var(--accent-color)]/20 transition-all flex items-center justify-center gap-2">
                                    <i class="fas fa-calculator"></i> Practice Problem Set
                                </button>
                            </div>
                            <!-- MAT110 -->
                            <div class="border border-[var(--glass-border)] p-4 rounded-lg hover:border-[var(--accent-color)] transition-colors relative group">
                                <h4 class="text-[var(--text-main)] font-semibold">MAT 110 — Calculus</h4>
                                <p class="text-[var(--text-muted)] text-xs mt-1">Oct 2025–Dec 2025</p>
                                <!-- New Button for MAT110 Problem Set -->
                                <button onclick="navigateTo('mat110-practice')" class="mt-3 w-full bg-[var(--accent-color)]/10 hover:bg-[var(--accent-color)]/20 text-[var(--accent-color)] text-xs py-2 rounded border border-[var(--accent-color)]/20 transition-all flex items-center justify-center gap-2">
                                    <i class="fas fa-square-root-alt"></i> Practice Problem Set
                                </button>
                            </div>
                            <!-- Other courses... -->
                            <div class="border border-[var(--glass-border)] p-4 rounded-lg hover:border-[var(--accent-color)] transition-colors">
                                <h4 class="text-[var(--text-main)] font-semibold">BHS 200 — Research Methods</h4>
                                <p class="text-[var(--text-muted)] text-xs mt-1">Sep 2025–Dec 2025</p>
                            </div>
                            <div class="border border-[var(--glass-border)] p-4 rounded-lg hover:border-[var(--accent-color)] transition-colors">
                                <h4 class="text-[var(--text-main)] font-semibold">BUS 270 — Business Information Systems</h4>
                                <p class="text-[var(--text-muted)] text-xs mt-1">Oct 2025–Dec 2025</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Other Teaching Entries ... -->
                <div class="glass-card p-8 rounded-2xl border-l-4 border-[var(--accent-color)] opacity-90">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-[var(--text-main)]">Université de Saint-Boniface</h3>
                            <p class="text-[var(--accent-color)] font-medium">Instructor | Winnipeg</p>
                        </div>
                        <div class="mt-2 md:mt-0 bg-[var(--glass-bg)] px-4 py-1 rounded-full text-sm text-[var(--text-main)] border border-[var(--glass-border)]">
                            September – December 2025
                        </div>
                    </div>
                    <div class="border border-[var(--glass-border)] p-4 rounded-lg">
                        <h4 class="text-[var(--text-main)] font-semibold">ECO100 — Introduction to Microeconomics</h4>
                    </div>
                </div>

                <div class="glass-card p-8 rounded-2xl border-l-4 border-[var(--accent-color)] opacity-90">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-[var(--text-main)]">Catholic University of Bukavu</h3>
                            <p class="text-[var(--accent-color)] font-medium">Sessional Instructor</p>
                        </div>
                        <div class="mt-2 md:mt-0 bg-[var(--glass-bg)] px-4 py-1 rounded-full text-sm text-[var(--text-main)] border border-[var(--glass-border)]">
                            September 2016 – May 2017
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="border border-[var(--glass-border)] p-4 rounded-lg">
                            <h4 class="text-[var(--text-main)] font-semibold">Macroeconomics</h4>
                            <p class="text-[var(--text-muted)] text-xs mt-1">Fall 2016 | 132 Undergraduates</p>
                        </div>
                        <div class="border border-[var(--glass-border)] p-4 rounded-lg">
                            <h4 class="text-[var(--text-main)] font-semibold">Quantitative Methods</h4>
                            <p class="text-[var(--text-muted)] text-xs mt-1">Winter 2017 | 210 Undergraduates</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ECO110 PROBLEM SET SUBPAGE (Existing) -->
        <section id="eco110-practice" class="page-section max-w-3xl mx-auto py-12">
            <button onclick="navigateTo('teaching')" class="text-[var(--accent-color)] text-sm mb-6 hover:text-[var(--accent-hover)] transition flex items-center gap-2">
                <i class="fas fa-arrow-left"></i> Back to Teaching
            </button>
            
            <div class="glass-card p-8 rounded-2xl border-t-4 border-orange-500">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-[var(--text-main)]">Microeconomics Problem Set</h2>
                        <p class="text-[var(--text-muted)] text-sm mt-1">Exam Preparation • ECO110</p>
                    </div>
                    <div class="text-right" id="score-display" style="display: none;">
                        <div class="text-xs text-[var(--text-muted)] uppercase tracking-wide">Current Score</div>
                        <div id="quiz-score" class="text-2xl font-mono font-bold text-[var(--accent-color)]">0 / 0</div>
                    </div>
                </div>

                <!-- Setup Screen -->
                <div id="quiz-setup" class="space-y-6 text-center py-10">
                    <h3 class="text-xl font-medium text-[var(--text-main)] mb-4">Select Quiz Length</h3>
                    <div class="flex flex-wrap justify-center gap-4">
                        <button onclick="startQuiz(5, 'eco110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-orange-500 hover:bg-orange-500/10 transition-all text-[var(--text-main)]">5 Questions</button>
                        <button onclick="startQuiz(10, 'eco110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-orange-500 hover:bg-orange-500/10 transition-all text-[var(--text-main)]">10 Questions</button>
                        <button onclick="startQuiz(20, 'eco110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-orange-500 hover:bg-orange-500/10 transition-all text-[var(--text-main)]">20 Questions</button>
                        <button onclick="startQuiz(40, 'eco110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-orange-500 hover:bg-orange-500/10 transition-all text-[var(--text-main)]">40 Questions</button>
                    </div>
                    <p class="text-sm text-[var(--text-muted)] mt-4">Questions are randomly selected from the test bank.</p>
                </div>

                <div id="quiz-container" class="space-y-6 hidden">
                    <!-- Progress Bar -->
                    <div class="w-full bg-[var(--glass-border)] rounded-full h-1.5 mb-6">
                        <div id="quiz-progress" class="bg-orange-500 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>

                    <!-- Question Area -->
                    <div class="min-h-[150px]">
                        <h4 id="quiz-question" class="text-xl font-medium text-[var(--text-main)] mb-6 leading-relaxed">Loading Question...</h4>
                        <div id="quiz-options" class="space-y-3">
                            <!-- Options injected here -->
                        </div>
                    </div>

                    <!-- Feedback Area -->
                    <div id="quiz-feedback" class="hidden p-5 rounded-xl border transition-all duration-500 bg-[var(--glass-bg)] backdrop-blur-md">
                        <div class="flex items-start gap-3">
                            <div id="feedback-icon" class="mt-1"></div>
                            <div>
                                <p id="feedback-title" class="font-bold mb-1 text-lg"></p>
                                <p id="feedback-text" class="text-sm text-[var(--text-muted)] leading-relaxed"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="flex justify-between items-center pt-6 border-t border-[var(--glass-border)]">
                        <button onclick="resetQuizSetup()" class="text-xs text-[var(--text-muted)] hover:text-[var(--text-main)] transition-colors flex items-center gap-2">
                            <i class="fas fa-arrow-left"></i> Quit
                        </button>
                        <button id="next-btn" onclick="nextQuestion()" class="btn-primary px-8 py-3 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all" disabled>
                            Next Question <i class="fas fa-chevron-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: MAT100 PROBLEM SET SUBPAGE -->
        <section id="mat100-practice" class="page-section max-w-3xl mx-auto py-12">
            <button onclick="navigateTo('teaching')" class="text-[var(--accent-color)] text-sm mb-6 hover:text-[var(--accent-hover)] transition flex items-center gap-2">
                <i class="fas fa-arrow-left"></i> Back to Teaching
            </button>
            
            <div class="glass-card p-8 rounded-2xl border-t-4 border-blue-500">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-[var(--text-main)]">Finite Math Problem Set</h2>
                        <p class="text-[var(--text-muted)] text-sm mt-1">Exam Preparation • MAT100</p>
                    </div>
                    <div class="text-right" id="mat-score-display" style="display: none;">
                        <div class="text-xs text-[var(--text-muted)] uppercase tracking-wide">Current Score</div>
                        <div id="mat-quiz-score" class="text-2xl font-mono font-bold text-[var(--accent-color)]">0 / 0</div>
                    </div>
                </div>

                <!-- Setup Screen -->
                <div id="mat-quiz-setup" class="space-y-6 text-center py-10">
                    <h3 class="text-xl font-medium text-[var(--text-main)] mb-4">Select Quiz Length</h3>
                    <div class="flex flex-wrap justify-center gap-4">
                        <button onclick="startQuiz(5, 'mat100')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-blue-500 hover:bg-blue-500/10 transition-all text-[var(--text-main)]">5 Questions</button>
                        <button onclick="startQuiz(10, 'mat100')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-blue-500 hover:bg-blue-500/10 transition-all text-[var(--text-main)]">10 Questions</button>
                        <button onclick="startQuiz(20, 'mat100')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-blue-500 hover:bg-blue-500/10 transition-all text-[var(--text-main)]">20 Questions</button>
                    </div>
                    <p class="text-sm text-[var(--text-muted)] mt-4">Questions cover Sets, Probability, Matrices, and Linear Programming.</p>
                </div>

                <!-- Note: Reusing similar IDs but scoped via JS to handle multiple quizzes would be cleaner, 
                     but for simplicity in this single-file update, I'll use distinct IDs or a shared logic function. 
                     I will use distinct IDs for the container to be safe. -->
                <div id="mat-quiz-container" class="space-y-6 hidden">
                    <!-- Progress Bar -->
                    <div class="w-full bg-[var(--glass-border)] rounded-full h-1.5 mb-6">
                        <div id="mat-quiz-progress" class="bg-blue-500 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>

                    <!-- Question Area -->
                    <div class="min-h-[150px]">
                        <h4 id="mat-quiz-question" class="text-xl font-medium text-[var(--text-main)] mb-6 leading-relaxed">Loading Question...</h4>
                        <div id="mat-quiz-options" class="space-y-3">
                            <!-- Options injected here -->
                        </div>
                    </div>

                    <!-- Feedback Area -->
                    <div id="mat-quiz-feedback" class="hidden p-5 rounded-xl border transition-all duration-500 bg-[var(--glass-bg)] backdrop-blur-md">
                        <div class="flex items-start gap-3">
                            <div id="mat-feedback-icon" class="mt-1"></div>
                            <div>
                                <p id="mat-feedback-title" class="font-bold mb-1 text-lg"></p>
                                <p id="mat-feedback-text" class="text-sm text-[var(--text-muted)] leading-relaxed"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="flex justify-between items-center pt-6 border-t border-[var(--glass-border)]">
                        <button onclick="resetQuizSetup()" class="text-xs text-[var(--text-muted)] hover:text-[var(--text-main)] transition-colors flex items-center gap-2">
                            <i class="fas fa-arrow-left"></i> Quit
                        </button>
                        <button id="mat-next-btn" onclick="nextQuestion()" class="btn-primary px-8 py-3 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all" disabled>
                            Next Question <i class="fas fa-chevron-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: MAT110 PROBLEM SET SUBPAGE -->
        <section id="mat110-practice" class="page-section max-w-3xl mx-auto py-12">
            <button onclick="navigateTo('teaching')" class="text-[var(--accent-color)] text-sm mb-6 hover:text-[var(--accent-hover)] transition flex items-center gap-2">
                <i class="fas fa-arrow-left"></i> Back to Teaching
            </button>
            
            <div class="glass-card p-8 rounded-2xl border-t-4 border-green-500">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-[var(--text-main)]">Calculus Problem Set</h2>
                        <p class="text-[var(--text-muted)] text-sm mt-1">Exam Preparation • MAT110</p>
                    </div>
                    <div class="text-right" id="mat110-score-display" style="display: none;">
                        <div class="text-xs text-[var(--text-muted)] uppercase tracking-wide">Current Score</div>
                        <div id="mat110-quiz-score" class="text-2xl font-mono font-bold text-[var(--accent-color)]">0 / 0</div>
                    </div>
                </div>

                <!-- Setup Screen -->
                <div id="mat110-quiz-setup" class="space-y-6 text-center py-10">
                    <h3 class="text-xl font-medium text-[var(--text-main)] mb-4">Select Quiz Length</h3>
                    <div class="flex flex-wrap justify-center gap-4">
                        <button onclick="startQuiz(5, 'mat110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-green-500 hover:bg-green-500/10 transition-all text-[var(--text-main)]">5 Questions</button>
                        <button onclick="startQuiz(10, 'mat110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-green-500 hover:bg-green-500/10 transition-all text-[var(--text-main)]">10 Questions</button>
                        <button onclick="startQuiz(20, 'mat110')" class="px-6 py-3 rounded-lg border border-[var(--glass-border)] hover:border-green-500 hover:bg-green-500/10 transition-all text-[var(--text-main)]">20 Questions</button>
                    </div>
                    <p class="text-sm text-[var(--text-muted)] mt-4">Questions cover Limits, Derivatives, and Integrals.</p>
                </div>

                <div id="mat110-quiz-container" class="space-y-6 hidden">
                    <!-- Progress Bar -->
                    <div class="w-full bg-[var(--glass-border)] rounded-full h-1.5 mb-6">
                        <div id="mat110-quiz-progress" class="bg-green-500 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>

                    <!-- Question Area -->
                    <div class="min-h-[150px]">
                        <h4 id="mat110-quiz-question" class="text-xl font-medium text-[var(--text-main)] mb-6 leading-relaxed">Loading Question...</h4>
                        <div id="mat110-quiz-options" class="space-y-3">
                            <!-- Options injected here -->
                        </div>
                    </div>

                    <!-- Feedback Area -->
                    <div id="mat110-quiz-feedback" class="hidden p-5 rounded-xl border transition-all duration-500 bg-[var(--glass-bg)] backdrop-blur-md">
                        <div class="flex items-start gap-3">
                            <div id="mat110-feedback-icon" class="mt-1"></div>
                            <div>
                                <p id="mat110-feedback-title" class="font-bold mb-1 text-lg"></p>
                                <p id="mat110-feedback-text" class="text-sm text-[var(--text-muted)] leading-relaxed"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="flex justify-between items-center pt-6 border-t border-[var(--glass-border)]">
                        <button onclick="resetQuizSetup()" class="text-xs text-[var(--text-muted)] hover:text-[var(--text-main)] transition-colors flex items-center gap-2">
                            <i class="fas fa-arrow-left"></i> Quit
                        </button>
                        <button id="mat110-next-btn" onclick="nextQuestion()" class="btn-primary px-8 py-3 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all" disabled>
                            Next Question <i class="fas fa-chevron-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- PUBLICATIONS PAGE -->
        <section id="publications" class="page-section">
             <div class="max-w-5xl mx-auto">
                <h2 class="text-4xl font-bold text-gradient-innovative mb-10 border-l-4 border-[var(--accent-color)] pl-6">Publications & Proceedings</h2>

                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-[var(--text-main)] mb-6 flex items-center gap-2"><i class="far fa-calendar-alt text-[var(--accent-color)]"></i> Forthcoming & 2026</h3>
                    <div class="space-y-4">
                        <!-- 2026/Forthcoming Items -->
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold group-hover:text-[var(--accent-color)] transition-colors">The Future of Banking Performance Evaluation: An Empirical Study of AI-Enhanced KPI Prediction Models</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F., & Mirindi, D. (2026) - In Handbook of Financial Services Performance. DOI: 10.1142/9789819823161_0012</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Optimizing ML algorithms for real-time privacy-preserving patient monitoring in embedded systems</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F., Khang, A., & Mirindi, D. (2026) - In Revolutionizing Digital Healthcare Through AI. DOI: 10.1016/B978-0-443-36434-1.00027-6</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Integration of AI and AR in medical imaging: A quantitative analysis of workflow optimization</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Khang, A., Mirindi, F., & Mirindi, D. (2026) - In Revolutionizing Digital Healthcare Through AI. DOI: 10.1016/B978-0-443-36434-1.00033-1</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">SEF-Net: A hybrid deep learning architecture for multi-step forecasting in sustainable energy markets</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F., & Mirindi, D. (2026) - In Advances in Computational Intelligence, IWANN 2025. DOI: 10.1007/978-3-032-02728-3_18</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Difference-in-Differences Meets AI: Identification, Representation, and Robust Inference via Learned Counterfactual Dynamics</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F. (2025) - Proceedings of IEEE BDKCSE 2025 Conference (Forthcoming)</p>
                        </div>
                         <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Adaptive Proof-of-Stake Governance: A Game-Theoretic Approach to Consensus Mechanisms</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F. (2025) - MARBLE 2025. Proceedings: Springer</p>
                        </div>
                    </div>
                </div>

                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-[var(--text-main)] mb-6 flex items-center gap-2"><i class="far fa-calendar text-[var(--accent-color)]"></i> 2025</h3>
                    <div class="space-y-4">
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Machine learning-driven analysis of nanoparticle performance on concrete mechanical properties</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, D., Hunter, J., Sinkhonde, D., & Mirindi, F. (2025) - Manufacturing Letters. DOI: 10.1016/j.mfglet.2025.07.001</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Predicting the compressive strength of laterite blocks stabilized with metakaolin geopolymer and sugarcane molasses</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Sinkhonde, D., Mirindi, F., et al. (2025) - Cleaner Waste Systems. DOI: 10.1016/j.clwas.2025.100352</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Ensemble machine learning algorithms for efficient prediction of compressive strength of concrete</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Sinkhonde, D., Bezabih, T., Mirindi, D., Mashava, D., & Mirindi, F. (2025) - Cleaner Waste Systems</p>
                        </div>
                        <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Artificial intelligence and automation for driving green transportation systems: A comprehensive review</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, D., Khang, A., & Mirindi, F. (2025) - DOI: 10.1007/978-3-031-72617-0_1</p>
                        </div>
                         <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Forecasting energy prices using machine learning algorithms: A comparative analysis</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F., & Mirindi, D. (2025) - Machine Learning Technologies on Energy Economics and Finance</p>
                        </div>
                         <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Neural networks for predicting market trends in sustainable industries: A review</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, F., & Mirindi, D. (2025) - Proceedings of RAISD 2025</p>
                        </div>
                    </div>
                </div>

                 <div class="mb-12">
                    <h3 class="text-2xl font-bold text-[var(--text-main)] mb-6 flex items-center gap-2"><i class="far fa-calendar-check text-[var(--accent-color)]"></i> 2024</h3>
                    <div class="space-y-4">
                         <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">Structural performance of boards through nanoparticle reinforcement: An advance review</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, D., Hunter, J., Mirindi, F., et al. (2024) - Nanotechnology Reviews</p>
                        </div>
                         <div class="glass-card p-5 rounded-xl group hover:border-[var(--accent-color)] transition-colors">
                            <h4 class="text-[var(--text-main)] font-semibold">An advance review of urban-AI and ethical considerations</h4>
                            <p class="text-[var(--text-muted)] text-sm mt-1">Mirindi, D., Sinkhonde, D., & Mirindi, F. (2024) - ACM Conference Proceedings</p>
                        </div>
                    </div>
                </div>
             </div>
        </section>

        <!-- BLOG PAGE (Updated Grid Layout) -->
        <section id="blog" class="page-section">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gradient-innovative mb-4">Economic Insights</h2>
                <p class="text-[var(--text-muted)]">Thoughts on current events through an econometric lens.</p>
            </div>
            <!-- Grid: 2 columns on large screens for perfect 2x2 layout of 4 items -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
                
                <!-- Article 1: Pope -->
                <article onclick="navigateTo('blog-post-1')" class="glass-card rounded-xl overflow-hidden group cursor-pointer">
                    <div class="h-48 relative overflow-hidden border-b border-[var(--glass-border)]">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/newpope.jpg?raw=true" alt="The Conclave" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                         <div class="absolute bottom-0 left-0 p-6">
                            <span class="text-xs font-bold uppercase tracking-wider text-white bg-purple-600 px-2 py-1 rounded">Network Science</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-[var(--text-muted)] text-sm mb-2">May 23, 2025</div>
                        <h3 class="text-xl font-bold text-[var(--text-main)] group-hover:text-[var(--accent-color)] transition">The Pope and the Algorithm</h3>
                        <p class="text-[var(--text-muted)] mt-3 text-sm line-clamp-3">
                            A new paper models the Vatican not as a divine hierarchy, but as a high-stakes social network, predicting the rise of Pope Leo XIV.
                        </p>
                        <div class="mt-4 text-[var(--accent-color)] text-sm font-semibold">Read More &rarr;</div>
                    </div>
                </article>

                <!-- Article 5: Haiti -->
                <article onclick="navigateTo('blog-post-5')" class="glass-card rounded-xl overflow-hidden group cursor-pointer">
                    <div class="h-48 relative overflow-hidden border-b border-[var(--glass-border)]">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/haiti1.PNG?raw=true" alt="Toussaint Louverture" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                         <div class="absolute bottom-0 left-0 p-6">
                            <span class="text-xs font-bold uppercase tracking-wider text-white bg-red-700 px-2 py-1 rounded">Economic History</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-[var(--text-muted)] text-sm mb-2">November 22, 2025</div>
                        <h3 class="text-xl font-bold text-[var(--text-main)] group-hover:text-[var(--accent-color)] transition">1804: The Price of Freedom</h3>
                        <p class="text-[var(--text-muted)] mt-3 text-sm line-clamp-3">
                            A critical look at the independence of Haiti, the "double debt," and the economic strangulation of the first Black republic.
                        </p>
                        <div class="mt-4 text-[var(--accent-color)] text-sm font-semibold">Read More &rarr;</div>
                    </div>
                </article>

                <!-- Article 4: Retail Overview -->
                <article onclick="navigateTo('blog-post-4')" class="glass-card rounded-xl overflow-hidden group cursor-pointer">
                    <div class="h-48 relative overflow-hidden border-b border-[var(--glass-border)]">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/market1.jpeg?raw=true" alt="African Supermarket Aisle" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                         <div class="absolute bottom-0 left-0 p-6">
                            <span class="text-xs font-bold uppercase tracking-wider text-white bg-green-600 px-2 py-1 rounded">Retail Economics</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-[var(--text-muted)] text-sm mb-2">November 18, 2025</div>
                        <h3 class="text-xl font-bold text-[var(--text-main)] group-hover:text-[var(--accent-color)] transition">Aisle Be There For You</h3>
                        <p class="text-[var(--text-muted)] mt-3 text-sm line-clamp-3">
                            Local chains are cracking the "missing middle" of African retail where global giants failed. What does this mean for the consumer class?
                        </p>
                        <div class="mt-4 text-[var(--accent-color)] text-sm font-semibold">Read More &rarr;</div>
                    </div>
                </article>

                <!-- Article 3: Sovereign Debt -->
                <article onclick="navigateTo('blog-post-3')" class="glass-card rounded-xl overflow-hidden group cursor-pointer">
                    <div class="h-48 relative overflow-hidden border-b border-[var(--glass-border)]">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/debt2.jpeg?raw=true" alt="African City Street" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                         <div class="absolute bottom-0 left-0 p-6">
                            <span class="text-xs font-bold uppercase tracking-wider text-white bg-blue-600 px-2 py-1 rounded">Sovereign Debt</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-[var(--text-muted)] text-sm mb-2">November 22, 2025</div>
                        <h3 class="text-xl font-bold text-[var(--text-main)] group-hover:text-[var(--accent-color)] transition">The Other Debt Crisis</h3>
                        <p class="text-[var(--text-muted)] mt-3 text-sm line-clamp-3">
                            A critical review of the surge in domestic borrowing across Sub-Saharan Africa: crowding out effects and the "doom loop" risks.
                        </p>
                        <div class="mt-4 text-[var(--accent-color)] text-sm font-semibold">Read More &rarr;</div>
                    </div>
                </article>

            </div>
        </section>

        <!-- BLOG POST 1: POPE -->
        <section id="blog-post-1" class="page-section max-w-4xl mx-auto py-12">
            <button onclick="navigateTo('blog')" class="text-[var(--accent-color)] text-sm mb-8 hover:text-[var(--accent-hover)] transition block"><i class="fas fa-arrow-left mr-2"></i> Back to Economic Insights</button>
            <div class="glass-card p-8 rounded-2xl">
                <h1 class="text-4xl font-bold text-gradient-innovative mb-4">The Pope and the Algorithm: How Network Analysis Cracked the Conclave</h1>
                <p class="text-[var(--text-muted)] mb-6 border-b border-[var(--glass-border)] pb-4">
                    <span class="font-semibold">Frédéric Mirindi</span> | May 23, 2025 | Network Science
                </p>
                <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/newpope.jpg?raw=true" alt="The Conclave in Sistine Chapel" class="w-full h-96 object-cover rounded-lg mb-8 opacity-90 shadow-lg">

                <div class="text-[var(--text-main)] space-y-6 text-lg leading-relaxed font-serif">
                    <p class="first-letter:text-5xl first-letter:float-left first-letter:mr-3 first-letter:text-[var(--accent-color)]">W</p>
                    <p>hen the College of Cardinals gathers beneath Michelangelo’s frescoes in the Sistine Chapel, the world is told that the Holy Spirit guides their hands. Yet, as the future Pope Benedict XVI once famously quipped, the Spirit’s role is likely "elastic"—preventing total ruin, but leaving plenty of room for human maneuvering. </p>
                    
                    <p>A fascinating new paper, <em>In the Network of the Conclave: Social Network Analysis and the Making of a Pope</em> (Soda, Iorio, & Rizzo), takes this premise literally. By stripping away the incense and theology, the authors model the Vatican not as a divine hierarchy, but as a high-stakes social network. Their findings suggest that while bookmakers and pundits obsess over charisma and geography, the true path to the papacy is paved with "structural holes" and "eigenvector centrality."</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Invisible Scaffolding of Power</h2>
                    <p>The central thesis of the paper is that traditional methods of predicting the Pope—analyzing betting markets, press mentions, or public speeches—are fundamentally flawed because they focus on <em>attributes</em> (who the person is) rather than <em>relations</em> (where the person sits).</p>
                    
                    <p>The authors reconstructed the "relational architecture" of the Vatican using two distinct datasets:</p>
                    <ul class="list-disc pl-6 space-y-2 text-[var(--text-muted)]">
                        <li><strong>Co-Membership:</strong> A map of which cardinals sit on the same Vatican committees (dicasteries) together.</li>
                        <li><strong>Consecration Lines:</strong> A genealogy of who ordained whom, creating a web of spiritual debt and loyalty.</li>
                    </ul>

                    <p>The resulting network reveals a "multiplex" system of influence. It is not enough to be popular; one must be connected to the <em>right</em> people (Status) and serve as a bridge between disconnected factions (Mediation Power).</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/pope2.PNG?raw=true" alt="Co-Membership Network of Cardinals" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 1: The "Co-Membership Network" illustrating the dense web of institutional affiliations connecting the cardinals.</figcaption>
                    </figure>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Prevost Paradox: Predicting the "Underdog"</h2>
                    <p>The paper’s most striking case study revolves around Cardinal Robert F. Prevost. In the run-up to the 2025 Conclave, Prevost was a ghost in the machine of public opinion. Bookmakers gave him a measly <strong>1% probability</strong> of election. He was a relative newcomer with little tenure in the College.</p>
                    
                    <p>However, the algorithm told a different story. When the authors ran their structural metrics, Prevost jumped off the page:</p>
                    <ul class="list-disc pl-6 space-y-2 text-[var(--text-muted)]">
                        <li><strong>Status:</strong> He ranked #1 in eigenvector centrality, meaning he was connected to the most influential peers.</li>
                        <li><strong>Mediation:</strong> He ranked high in "betweenness," meaning he could bridge the gap between conservative and liberal blocs.</li>
                        <li><strong>Coalition Building:</strong> He had the highest capacity to mobilize votes across different communities.</li>
                    </ul>

                    <p>While the world looked at the loud voices, the network identified the silent keystone. In the paper's analysis, Prevost’s structural dominance made him the <em>de facto</em> strongest candidate, a prediction validated by his selection as "Pope Leo XIV."</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/pope5.PNG?raw=true" alt="Multiplex Network showing Centrality" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 2: The Multiplex Network. Note the size of the node for "R. Prevost," indicating massive centrality despite low public visibility.</figcaption>
                    </figure>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">A Critique: The Limits of the Map</h2>
                    <p>While <em>In the Network of the Conclave</em> is a triumph of structural analysis, it is not without its blind spots.</p>
                    
                    <p><strong>1. The "Dark Matter" of Informal Ties:</strong> The study relies entirely on formal, public records—who sits on a committee, who ordained whom. It cannot capture the "dark matter" of the Vatican: private dinners, whispered alliances in the hallways of the <em>Domus Sanctae Marthae</em>, or personal animosities. In closed elites, these informal ties often override formal ones.</p>
                    
                    <p><strong>2. Static vs. Dynamic:</strong> The paper presents a static snapshot of the network leading up to the vote. However, a conclave is a dynamic, evolving organism. Momentum shifts rapidly after the first ballot. A dynamic model that accounts for how "preference cascades" occur once voting starts would be a necessary evolution of this work.</p>
                    
                    <p><strong>3. The Role of Ideology:</strong> The paper touches on doctrinal orientation, but treats it secondary to structure. In reality, theological "red lines" can be insurmountable walls that no amount of "betweenness centrality" can bridge. If the Church is deeply polarized, a central broker might be rejected by <em>both</em> sides as being too compromised, rather than accepted as a unifier.</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/network.JPG?raw=true" alt="Network colored by doctrinal orientation" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 3: The network colored by doctrinal orientation (Red/Blue). While the algorithm predicts bridges, deep ideological divides can sometimes snap them.</figcaption>
                    </figure>

                    <p>Soda, Iorio, and Rizzo have provided a compelling reminder that in the Vatican, as in corporate boardrooms, power is a function of position. By ignoring the noise of the media and focusing on the signal of the structure, they uncovered what human intuition missed. Future conclave watchers would do well to put down the betting slips and pick up a graph theory textbook.</p>
                </div>
            </div>
        </section>

        <!-- BLOG POST 3: AFRICAN DEBT -->
        <section id="blog-post-3" class="page-section max-w-4xl mx-auto py-12">
             <button onclick="navigateTo('blog')" class="text-[var(--accent-color)] text-sm mb-8 hover:text-[var(--accent-hover)] transition block"><i class="fas fa-arrow-left mr-2"></i> Back to Economic Insights</button>
            <div class="glass-card p-8 rounded-2xl">
                <h1 class="text-4xl font-bold text-gradient-innovative mb-4">The Other Debt Crisis: Africa's Domestic Borrowing Dilemma</h1>
                <p class="text-[var(--text-muted)] mb-6 border-b border-[var(--glass-border)] pb-4">
                    <span class="font-semibold">Frédéric Mirindi</span> | November 22, 2025 | Sovereign Debt & Development
                </p>
                <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/debt2.jpeg?raw=true" alt="African City Street Scene" class="w-full h-96 object-cover rounded-lg mb-8 opacity-90 shadow-lg">

                <div class="text-[var(--text-main)] space-y-6 text-lg leading-relaxed font-serif">
                    <p class="first-letter:text-5xl first-letter:float-left first-letter:mr-3 first-letter:text-[var(--accent-color)]">W</p>
                    <p>hile the global financial press remains fixated on Chinese infrastructure loans and Eurobond defaults, a more insidious structural shift is occurring within African capital markets. As highlighted in a recent briefing by <em>The Economist</em> ("The other debt crisis," Nov 22, 2025), the composition of African sovereign liabilities has undergone a "major transformation." Domestic borrowing has surged from $150bn in 2010 to nearly $500bn in 2024, now constituting roughly half of all government debt in sub-Saharan Africa.</p>
                    
                    <p>This pivots the conversation from external vulnerability to internal fragility. This article summarizes the key arguments presented by <em>The Economist</em> and offers a critical econometric perspective on the implications for long-run growth.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The "Original Sin" Trade-off</h2>
                    <p>Historically, emerging markets suffered from "original sin"—the inability to borrow abroad in their own currency. This exposed them to catastrophic currency mismatches when the dollar strengthened. Domestic borrowing theoretically solves this; liabilities are denominated in the same currency as tax revenues.</p>
                    <p>However, this safety comes at a steep price. The article notes that interest rates on domestic instruments are typically <strong>three to six percentage points higher</strong> than external concessional financing. Furthermore, maturities are dangerously short. This forces governments into a perpetual cycle of refinancing, diverting colossal sums from productive investment. In Kenya, for instance, one-third of financing needs are consumed by debt service, stifling public expenditure on health and education.</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/debt1.jpeg?raw=true" alt="Chart: Africa Sovereign Borrowing by Category" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 1: The shifting composition of African sovereign debt (Source: The Economist/Kiel Institute).</figcaption>
                    </figure>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Domestic "Doom Loop"</h2>
                    <p>The most alarming structural risk identified is the symbiotic fragility between sovereigns and local banks. In many sub-Saharan nations, banks hold over 20% of their assets in government debt. This creates a "doom loop": if sovereign creditworthiness falters, bank balance sheets collapse; if banks falter, the government loses its primary creditor. This dynamic crowds out the private sector, as banks find it safer and more lucrative to lend to the state than to innovative SMEs, effectively strangling the engine of future growth.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">Critical Perspective: A Necessary Evil?</h2>
                    <div class="my-6 p-6 bg-[var(--glass-bg)] border-l-4 border-[var(--accent-color)] text-[var(--text-muted)]">
                        "While the 'crowding out' critique is robust, it ignores the geopolitical utility of domestic debt. In a world of weaponized dollar diplomacy, deep local markets are a prerequisite for true monetary sovereignty."
                    </div>
                    <p>Critically, <em>The Economist</em> perhaps underplays the structural drivers of this shift. The surge in domestic borrowing is not merely a policy error but a rational response to the drying up of international capital flows and the volatility of the Eurobond market. While the costs are high, the alternative—a return to dependency on conditional multilateral loans—carries its own political economy risks.</p>
                    
                    <p>The path forward lies not in curbing domestic issuance, but in <strong>market deepening</strong>. As seen in Nigeria and Tanzania, extending the yield curve to longer maturities can mitigate rollover risk. The goal should be to transform this "crisis" into a catalyst for robust, liquid, and diverse African capital markets.</p>
                </div>
            </div>
        </section>

        <!-- BLOG POST 4: SUPERMARKETS (NEW) -->
        <section id="blog-post-4" class="page-section max-w-4xl mx-auto py-12">
             <button onclick="navigateTo('blog')" class="text-[var(--accent-color)] text-sm mb-8 hover:text-[var(--accent-hover)] transition block"><i class="fas fa-arrow-left mr-2"></i> Back to Economic Insights</button>
            <div class="glass-card p-8 rounded-2xl">
                <h1 class="text-4xl font-bold text-gradient-innovative mb-4">Aisle Be There For You: The Rise of Africa's Local Retail Giants</h1>
                <p class="text-[var(--text-muted)] mb-6 border-b border-[var(--glass-border)] pb-4">
                    <span class="font-semibold">Frédéric Mirindi</span> | November 18, 2025 | Development Economics
                </p>
                <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/market1.jpeg?raw=true" alt="Inside a modern African supermarket" class="w-full h-96 object-cover rounded-lg mb-8 opacity-90 shadow-lg">

                <div class="text-[var(--text-main)] space-y-6 text-lg leading-relaxed font-serif">
                    <p class="first-letter:text-5xl first-letter:float-left first-letter:mr-3 first-letter:text-[var(--accent-color)]">T</p>
                    <p>o walk along the main road in Ruaka, on the outskirts of Nairobi, is to witness a dichotomy that defines modern African commerce. On the street, informal market stalls overflow with vegetables and charcoal. In the distance stands a gleaming mall housing a Carrefour franchise. But bridging this gap is Quickmart, a local Kenyan chain that has rapidly expanded to nearly 60 branches. It represents a quiet revolution: the rise of homegrown retailers filling the "missing middle" where international giants have often stumbled.</p>
                    
                    <p>Historically, African retail has been bifurcated. Supermarkets catered to the affluent elite, while the vast majority of the population (purchasing over 70% of food and goods) relied on informal vendors. However, as noted in a recent analysis by <em>The Economist</em>, local chains like Quickmart (Kenya), Marketsquare (Nigeria), and Kazyon (Egypt) are proving that formal retail can successfully compete for the mass market.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Failure of the "Cut-and-Paste" Model</h2>
                    <p>The retreat of Shoprite from Nigeria in 2021 serves as a cautionary tale. The South African giant struggled with a business model that relied heavily on imported goods and leases priced in dollars. When the naira depreciated, their cost structure collapsed. Ebele Enunwa, CEO of Marketsquare, notes that international chains often sold products "that Nigerians did not know or care about."</p>
                    
                    <p>In contrast, local challengers are agile. They locate stores in secondary cities and satellite towns rather than just prestige capitals. They understand that the African consumer is not merely "rising" in a linear fashion but is a strategic shopper navigating high inflation. Quickmart, for example, operates 24-hour branches to serve informal workers and stocks hot takeaways for Nairobi's young professionals.</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/market2.jpeg?raw=true" alt="Chart: Modern Retail Market Share Forecast" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 1: Forecasted growth of modern retail market share in key African economies (Source: Boston Consulting Group/The Economist).</figcaption>
                    </figure>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">Redefining the "Consumer Class"</h2>
                    <p>Investors have long obsessed over the African "middle class," a term that often obscures more than it reveals. Analytics firm Fraym estimates a "consumer class" of 330 million people, yet purchasing power parity (PPP) data shows average incomes in sub-Saharan Africa remain a fraction of those in other emerging markets.</p>
                    
                    <p>This reality has forced even e-commerce giants like Jumia to pivot. Moving away from the "Amazon of Africa" narrative targeting elites, Jumia is now delivering practical goods—weed-sprayers, shoes, and blenders—to customers in smaller towns ("up country"). This shift from aspirational luxury to practical utility is the new frontier of African retail.</p>

                    <div class="my-6 p-6 bg-[var(--glass-bg)] border-l-4 border-[var(--accent-color)] text-[var(--text-muted)]">
                        "You can't just look at what Africans have to spend—but <em>how</em> they spend it. The notion of the 'rise of the African middle class' can give you a distorted strategy." — Charles Mwebeiha, Sango Capital.
                    </div>

                    <p>The success of these local chains suggests that the future of African retail isn't about replacing the informal market entirely, but upgrading it. By offering safety, consistency, and localized products at competitive price points, they are building a uniquely African model of modernity.</p>
                </div>
            </div>
        </section>

        <!-- BLOG POST 5: HAITI (NEW) -->
        <section id="blog-post-5" class="page-section max-w-4xl mx-auto py-12">
             <!-- ... existing content ... -->
            <button onclick="navigateTo('blog')" class="text-[var(--accent-color)] text-sm mb-8 hover:text-[var(--accent-hover)] transition block"><i class="fas fa-arrow-left mr-2"></i> Back to Economic Insights</button>
            <div class="glass-card p-8 rounded-2xl">
                <h1 class="text-4xl font-bold text-gradient-innovative mb-4">1er janvier 1804 - L'indépendance d'Haïti | Quand l'histoire fait dates</h1>
                 <!-- ... content ... -->
                <p class="text-[var(--text-muted)] mb-6 border-b border-[var(--glass-border)] pb-4">
                    <span class="font-semibold">Frédéric Mirindi</span> | January 1, 2026 | Economic History
                </p>
                <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/haiti1.PNG?raw=true" alt="Toussaint Louverture" class="w-full h-96 object-cover rounded-lg opacity-90 shadow-lg">
                 <div class="text-[var(--text-main)] space-y-6 text-lg leading-relaxed font-serif">
                    <p class="first-letter:text-5xl first-letter:float-left first-letter:mr-3 first-letter:text-[var(--accent-color)]">O</p>
                    <p>n January 1, 1804, Jean-Jacques Dessalines declared the independence of Haiti, marking the first time in history that a slave revolt led to the founding of a sovereign state. This event shattered the myth of white supremacy and sent shockwaves through the colonial powers of the Atlantic. However, as the <a href="https://www.youtube.com/watch?v=5XUJg3g3rqw" target="_blank" class="text-[var(--accent-color)] hover:underline">Arte documentary "Quand l'histoire fait dates"</a> vividly illustrates, this freedom came at an exorbitant price—a price that Haiti is, in many ways, still paying today.</p>
                    
                    <p>While the video provides a compelling narrative of the revolution, a rigorous economic critique reveals that Haiti's underdevelopment was not merely a result of isolation, but of active, calculated financial extraction by France and the United States.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Economic Strangulation: The "Double Debt"</h2>
                    <p>The most critical economic event discussed is the indemnity of 1825. Under threat of war, France demanded 150 million gold francs—later reduced but still crushing—in exchange for diplomatic recognition. This was not aid; it was reverse reparations. Haiti was forced to compensate slaveholders for their lost "property" (human beings).</p>
                    
                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/haiti6.PNG?raw=true" alt="Chart showing the 150 Million Franc Indemnity" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 1: The disparity between the crushing indemnity (150 million francs) and Haiti's economic capacity.</figcaption>
                    </figure>
                    
                    <p>To pay this ransom, Haiti had to take out loans from French banks, creating a "double debt"—the indemnity itself and the interest on the loans to pay it. This siphoned off wealth for over a century. By 1900, 80% of Haiti's national budget was consumed by debt repayment. This capital flight prevented investment in infrastructure, education, or industrialization, effectively locking the nation into an agrarian trap.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">The Trap of Monoculture</h2>
                    <p>The documentary rightly points out the colonial legacy of the "Pearl of the Antilles." Saint-Domingue was the world's most profitable colony, producing 60% of the world's coffee and 40% of its sugar. However, this wealth was built on a fragile monoculture system dependent on forced labor.</p>

                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/haiti5.PNG?raw=true" alt="Production Statistics: Coffee, Cotton, Sugar" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 2: The colonial economy was an export machine: Coffee (37%), Cotton (60%), Sugar (56%).</figcaption>
                    </figure>

                    <p>Post-independence, Haitian leaders faced a dilemma: maintain the plantation system to generate export revenue (which required militarized labor, alienating the newly free peasantry) or break up the land into subsistence plots (which meant freedom but poverty). The lack of diversification and the reliance on volatile commodity markets left the economy vulnerable to external shocks.</p>

                    <h2 class="text-2xl font-bold pt-4 text-[var(--text-main)] border-t border-[var(--glass-border)] sans-serif">A Critique of the Narrative</h2>
                    <p>From an economic history perspective, the video could be critiqued for not emphasizing enough the role of the <strong>United States occupation (1915-1934)</strong>. While it mentions isolation, the US actively seized Haiti's gold reserves and rewrote its constitution to allow foreign land ownership. This wasn't just "instability"; it was imperial resource extraction.</p>
                    
                    <figure class="my-8">
                        <img src="https://github.com/fredericmirindi/frederic.mirindi/blob/main/images/haiti8.PNG?raw=true" alt="Jean-Bertrand Aristide and Economic Maps" class="w-full h-auto rounded-lg border border-[var(--glass-border)] shadow-md">
                        <figcaption class="text-center text-sm text-[var(--text-muted)] mt-2 italic">Figure 3: Modern political instability is deeply rooted in these historical economic debts.</figcaption>
                    </figure>

                    <p>Furthermore, the "reparations" demanded by President Aristide in 2003 (estimated at $21 billion) were not charity, but a restitution of the capital stolen through the 1825 indemnity. The documentary touches on this, but the economic argument is stronger: without that initial capital drain, compound growth suggests Haiti's trajectory would have been radically different.</p>
                    
                    <div class="my-6 p-6 bg-[var(--glass-bg)] border-l-4 border-[var(--accent-color)] text-[var(--text-muted)]">
                        "Haiti's poverty is not a failure of governance alone; it is the mathematical result of a century of debt service paid to the very powers that enslaved it."
                    </div>
                 </div>
            </div>
        </section>

        <!-- CONTACT PAGE -->
        <section id="contacts" class="page-section">
            <div class="max-w-2xl mx-auto">
                <div class="glass-card rounded-2xl p-8 md:p-12">
                    <h2 class="text-3xl font-bold text-gradient-innovative mb-2">Get in Touch</h2>
                    <p class="text-[var(--text-muted)] mb-8">Interested in collaboration, data analysis consulting, or discussing economic theory? Send me a message.</p>
                    
                    <!-- NEW: Socials in Contact Form -->
                    <div class="flex justify-center gap-6 mb-8">
                        <a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" class="bg-[var(--glass-bg)] border border-[var(--glass-border)] hover:border-[var(--accent-color)] p-3 rounded-full text-[var(--text-muted)] hover:text-[var(--accent-color)] transition-all">
                            <i class="fab fa-linkedin text-2xl"></i>
                        </a>
                    </div>

                    <!-- Form Updated with ID for JS handling -->
                    <form id="contact-form" onsubmit="submitToGoogle(event)" class="space-y-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-[var(--text-muted)] mb-2">Name</label>
                                <input type="text" name="name" id="contact-name" class="w-full bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-lg px-4 py-3 text-[var(--text-main)] focus:outline-none focus:border-[var(--accent-color)] transition" placeholder="John Doe" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[var(--text-muted)] mb-2">Email</label>
                                <input type="email" name="email" id="contact-email" class="w-full bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-lg px-4 py-3 text-[var(--text-main)] focus:outline-none focus:border-[var(--accent-color)] transition" placeholder="john@example.com" required>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-[var(--text-muted)] mb-2">Subject</label>
                            <input type="text" name="subject" id="contact-subject" class="w-full bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-lg px-4 py-3 text-[var(--text-main)] focus:outline-none focus:border-[var(--accent-color)] transition" placeholder="Research Collaboration" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-[var(--text-muted)] mb-2">Message</label>
                            <textarea name="message" rows="4" id="contact-message" class="w-full bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-lg px-4 py-3 text-[var(--text-main)] focus:outline-none focus:border-[var(--accent-color)] transition" placeholder="Your message here..." required></textarea>
                        </div>
                        
                        <!-- Feedback Message Area -->
                        <div id="form-feedback" class="hidden text-center text-sm font-medium p-3 rounded"></div>

                        <button type="submit" id="submit-btn" class="w-full btn-primary py-4 rounded-lg font-bold transition-all duration-300">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <footer class="relative z-10 border-t border-[var(--glass-border)] bg-[var(--glass-bg)] backdrop-blur-sm mt-auto">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center flex-col md:flex-row">
            <p class="text-[var(--text-muted)] text-sm">© 2018 Frédéric Mirindi. All rights reserved.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- GOOGLE SHEETS INTEGRATION ---
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycby3AkCj4g5KEHb1HVtrji8obzv7N51nJum4w2rXcbr2QgWKqF-lYnxiLP9E2v6APN6t5Q/exec"; 

        function submitToGoogle(e) {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            const feedback = document.getElementById('form-feedback');
            const form = document.getElementById('contact-form');
            
            const originalText = btn.innerText;
            btn.innerText = "Sending...";
            btn.disabled = true;
            btn.style.opacity = "0.7";

            const data = new FormData(form);

            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                body: data
            })
            .then(response => {
                form.reset();
                feedback.innerText = "Message Sent Successfully!";
                feedback.className = "text-green-400 bg-green-900/20 border border-green-500/30 block text-center text-sm font-medium p-3 rounded mb-4";
                btn.innerText = "Sent";
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.disabled = false;
                    btn.style.opacity = "1";
                    feedback.classList.add('hidden');
                }, 3000);
            })
            .catch(error => {
                console.error('Error!', error.message);
                feedback.innerText = "Error connecting to server. Opening email client...";
                feedback.className = "text-yellow-400 bg-yellow-900/20 border border-yellow-500/30 block text-center text-sm font-medium p-3 rounded mb-4";
                sendEmailFallback();
                btn.innerText = originalText;
                btn.disabled = false;
                btn.style.opacity = "1";
            });
        }

        function sendEmailFallback() {
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const subject = document.getElementById('contact-subject').value;
            const message = document.getElementById('contact-message').value;
            
            const mailtoLink = `mailto:mirindifrederic@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent("Name: " + name + "\nEmail: " + email + "\n\n" + message)}`;
            window.location.href = mailtoLink;
        }

        // --- APP 1: OLS REGRESSION LOGIC ---
        function calculateOLS() {
            const xInput = document.getElementById('ols-x').value;
            const yInput = document.getElementById('ols-y').value;
            const resultDiv = document.getElementById('ols-result');
            const eqSpan = document.getElementById('ols-equation');
            const r2Span = document.getElementById('ols-r2');
            const seSpan = document.getElementById('ols-se');
            const tStatSpan = document.getElementById('ols-tstat');
            const nSpan = document.getElementById('ols-n');

            try {
                const x = xInput.split(',').map(val => val.trim()).filter(val => val !== '').map(Number); 
                const y = yInput.split(',').map(val => val.trim()).filter(val => val !== '').map(Number);

                if (x.some(isNaN) || y.some(isNaN)) throw new Error("NaN detected. Please check your inputs for non-numeric characters.");
                if (x.length < 2) throw new Error("Insufficient data. Please enter at least two data points.");
                if (x.length !== y.length) throw new Error(`Data mismatch. X has ${x.length} points, but Y has ${y.length}. They must be equal.`);

                const n = x.length;
                const sumX = x.reduce((a, b) => a + b, 0);
                const sumY = y.reduce((a, b) => a + b, 0);
                const sumXY = x.reduce((sum, xi, i) => sum + xi * y[i], 0);
                const sumX2 = x.reduce((sum, xi) => sum + xi * xi, 0);

                const denominator = (n * sumX2 - sumX * sumX);
                if (denominator === 0) throw new Error("Vertical line (undefined slope)");

                const slope = (n * sumXY - sumX * sumY) / denominator;
                const intercept = (sumY - slope * sumX) / n;

                const yMean = sumY / n;
                const totalSS = y.reduce((sum, yi) => sum + Math.pow(yi - yMean, 2), 0);
                const resSS = y.reduce((sum, yi, i) => {
                    const pred = slope * x[i] + intercept;
                    return sum + Math.pow(yi - pred, 2);
                }, 0);
                
                let r2 = 0;
                if(totalSS !== 0) {
                    r2 = 1 - (resSS / totalSS);
                } else {
                    r2 = 1; 
                }

                const df = n - 2;
                let stdErr = 0;
                let tStat = 0;

                if (df > 0) {
                    const mse = resSS / df;
                    stdErr = Math.sqrt(mse);
                    const sxx = denominator / n;
                    const seSlope = stdErr / Math.sqrt(sxx);
                    tStat = slope / seSlope;
                } else {
                    stdErr = 0;
                    tStat = (resSS === 0) ? Infinity : 0; 
                }

                resultDiv.classList.remove('hidden');
                resultDiv.classList.remove('animate-pulse'); 
                void resultDiv.offsetWidth; 
                resultDiv.classList.add('animate-pulse');
                
                eqSpan.innerHTML = `y = ${intercept.toFixed(2)} + ${slope.toFixed(2)}x`;
                r2Span.innerHTML = r2.toFixed(4);
                seSpan.innerHTML = stdErr.toFixed(4);
                tStatSpan.innerHTML = isFinite(tStat) ? tStat.toFixed(4) : "Inf";
                nSpan.innerHTML = n;

            } catch (e) {
                console.error(e);
                alert("Error: " + e.message); 
            }
        }

        // --- APP 2: INFLATION SIMULATOR LOGIC ---
        const infAmount = document.getElementById('inf-amount');
        const infRate = document.getElementById('inf-rate');
        const infYears = document.getElementById('inf-years');
        const infYearsVal = document.getElementById('inf-years-val');
        const infResult = document.getElementById('inf-result');
        const infLoss = document.getElementById('inf-loss');

        function updateInflation() {
            const P = parseFloat(infAmount.value) || 0;
            const r = parseFloat(infRate.value) || 0;
            const t = parseFloat(infYears.value);
            
            if(infYearsVal) infYearsVal.innerText = t;

            const realValue = P / Math.pow((1 + r/100), t);
            const lossPct = ((P - realValue) / P) * 100;

            if(infResult) infResult.innerText = "$" + realValue.toLocaleString('en-US', {maximumFractionDigits: 2});
            if(infLoss) infLoss.innerText = isNaN(lossPct) ? "0.0" : lossPct.toFixed(1);
        }

        if(infAmount && infRate && infYears) {
            [infAmount, infRate, infYears].forEach(el => el.addEventListener('input', updateInflation));
            updateInflation(); 
        }

        // --- APP 3: COMPOUND GROWTH LOGIC ---
        function calculateCompound() {
            const P = parseFloat(document.getElementById('comp-principal').value) || 0;
            const PMT = parseFloat(document.getElementById('comp-contrib').value) || 0;
            const freq = parseInt(document.getElementById('comp-freq').value) || 12;
            const r = (parseFloat(document.getElementById('comp-rate').value) || 0) / 100;
            const t = parseInt(document.getElementById('comp-years').value) || 1;
            
            const chart = document.getElementById('compound-chart');
            const totalLabel = document.getElementById('final-total-label');
            const principalLabel = document.getElementById('summary-principal');

            // Clear chart
            chart.innerHTML = '';

            let currentAmount = P;
            let totalContributed = P;
            let dataPoints = [{ year: 0, val: P, principal: P }];

            // Calculation Loop
            for(let i = 1; i <= t; i++) {
                for(let f = 0; f < freq; f++) {
                    currentAmount = currentAmount * (1 + r/freq) + PMT;
                    totalContributed += PMT;
                }
                dataPoints.push({ 
                    year: i, 
                    val: currentAmount,
                    principal: totalContributed
                });
            }

            const maxAmount = dataPoints[dataPoints.length - 1].val;
            
            // Update Summary Text
            totalLabel.innerText = `Total: $${Math.round(maxAmount).toLocaleString()}`;
            if(principalLabel) {
                principalLabel.innerText = `$${Math.round(totalContributed).toLocaleString()}`;
            }

            // Draw Graph
            dataPoints.forEach((data, index) => {
                const barContainer = document.createElement('div');
                barContainer.className = "flex-1 flex flex-col justify-end group relative cursor-pointer h-full hover:z-10";
                
                // Bar Wrapper for Stacking (Interest on top of Principal)
                const barHeightPct = maxAmount > 0 ? (data.val / maxAmount) * 100 : 0;
                const principalHeightPct = maxAmount > 0 ? (data.principal / maxAmount) * 100 : 0;
                
                // Principal Bar (Grey/Muted)
                const barPrincipal = document.createElement('div');
                barPrincipal.style.height = `${Math.max(principalHeightPct, 1)}%`;
                barPrincipal.style.width = "100%";
                barPrincipal.style.position = "absolute";
                barPrincipal.style.bottom = "0";
                barPrincipal.className = "bg-[var(--text-muted)] opacity-30 rounded-b-sm transition-all duration-500";
                
                // Total Value Bar (Accent Color)
                const barTotal = document.createElement('div');
                barTotal.style.height = `${Math.max(barHeightPct, 1)}%`;
                barTotal.style.backgroundColor = "var(--accent-color)"; 
                barTotal.style.opacity = "0.7";
                barTotal.className = "w-full rounded-t-sm transition-all duration-500 relative";
                
                // Animation
                barTotal.style.transform = "scaleY(0)";
                barTotal.style.transformOrigin = "bottom";
                setTimeout(() => { barTotal.style.transform = "scaleY(1)"; }, index * 15);

                // Tooltip
                const interest = data.val - data.principal;
                const tip = document.createElement('div');
                tip.className = "absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-[var(--bg-color)] text-[var(--text-main)] text-[10px] border border-[var(--glass-border)] p-2 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap shadow-xl z-50 transition-opacity";
                tip.innerHTML = `
                    <div class="font-bold mb-1">Year ${data.year}</div>
                    <div class="flex justify-between gap-3"><span>Total:</span> <span class="text-[var(--accent-color)]">$${Math.round(data.val).toLocaleString()}</span></div>
                    <div class="flex justify-between gap-3 text-[var(--text-muted)]"><span>Princ:</span> <span>$${Math.round(data.principal).toLocaleString()}</span></div>
                    <div class="flex justify-between gap-3 text-[var(--text-muted)]"><span>Int:</span> <span>$${Math.round(interest).toLocaleString()}</span></div>
                `;

                barContainer.appendChild(tip);
                barContainer.appendChild(barTotal); 
                
                chart.appendChild(barContainer);
            });
        }

        // Initial Call
        if(document.getElementById('comp-principal')) {
            document.getElementById('comp-freq').addEventListener('change', calculateCompound);
            calculateCompound();
        }

        // --- APP 4: MONTE CARLO SIMULATOR LOGIC ---
        function runMonteCarlo() {
            const P = parseFloat(document.getElementById('mc-principal').value) || 10000;
            const mean = (parseFloat(document.getElementById('mc-mean').value) || 8) / 100;
            const vol = (parseFloat(document.getElementById('mc-vol').value) || 15) / 100;
            const years = parseInt(document.getElementById('mc-years').value) || 10;
            
            const canvas = document.getElementById('mc-canvas');
            const ctx = canvas.getContext('2d');
            
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            const w = rect.width;
            const h = rect.height;

            ctx.clearRect(0, 0, w, h);

            const simulations = 50;
            const finalValues = [];
            let maxVal = 0;
            let minVal = Infinity;
            
            const paths = [];

            for(let s=0; s<simulations; s++) {
                let path = [P];
                let currentVal = P;
                for(let t=1; t<=years; t++) {
                    const u1 = Math.random();
                    const u2 = Math.random();
                    const z = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2.0 * Math.PI * u2); // Box-Muller
                    
                    const drift = mean - (0.5 * vol * vol);
                    const shock = vol * z;
                    const ret = Math.exp(drift + shock);
                    
                    currentVal = currentVal * ret;
                    path.push(currentVal);
                }
                finalValues.push(currentVal);
                paths.push(path);
                if(currentVal > maxVal) maxVal = currentVal;
                if(currentVal < minVal) minVal = currentVal;
            }

            if(P > maxVal) maxVal = P;
            if(P < minVal) minVal = P;

            finalValues.sort((a,b) => a-b);
            const p05 = finalValues[Math.floor(simulations * 0.05)];
            const p50 = finalValues[Math.floor(simulations * 0.50)];
            const p95 = finalValues[Math.floor(simulations * 0.95)];

            document.getElementById('mc-worst').innerText = "$" + Math.round(p05).toLocaleString();
            document.getElementById('mc-median').innerText = "$" + Math.round(p50).toLocaleString();
            document.getElementById('mc-best').innerText = "$" + Math.round(p95).toLocaleString();

            const stepX = w / years;
            const rangeY = maxVal - (minVal * 0.8); 
            const baselineY = minVal * 0.8;

            paths.forEach((path, i) => {
                ctx.beginPath();
                ctx.moveTo(0, h - ((path[0] - baselineY) / rangeY * h));
                
                for(let t=1; t<=years; t++) {
                    const x = t * stepX;
                    const y = h - ((path[t] - baselineY) / rangeY * h);
                    ctx.lineTo(x, y);
                }
                
                ctx.strokeStyle = `rgba(139, 92, 246, ${Math.random() * 0.3 + 0.1})`; // Purple-ish
                ctx.lineWidth = 1.5;
                ctx.stroke();
            });
            
            const startY = h - ((P - baselineY) / rangeY * h);
            ctx.beginPath();
            ctx.moveTo(0, startY);
            ctx.lineTo(w, startY);
            ctx.strokeStyle = "rgba(255, 255, 255, 0.3)";
            ctx.setLineDash([5, 5]);
            ctx.stroke();
        }

        setTimeout(runMonteCarlo, 500);

        // --- APP 6: MARKET TRACKER LOGIC ---
        
        // 1. Crypto Data (Real CoinGecko API)
        async function fetchCryptoData() {
            const container = document.getElementById('crypto-list');
            if (!container) return;
            
            const coins = ['bitcoin', 'ethereum', 'solana', 'binancecoin', 'ripple'];
            
            try {
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coins.join(',')}&vs_currencies=usd&include_24hr_change=true`);
                const data = await response.json();
                
                const mapping = [
                    { id: 'bitcoin', name: 'Bitcoin', sym: 'BTC' },
                    { id: 'ethereum', name: 'Ethereum', sym: 'ETH' },
                    { id: 'solana', name: 'Solana', sym: 'SOL' },
                    { id: 'binancecoin', name: 'BNB', sym: 'BNB' },
                    { id: 'ripple', name: 'Ripple', sym: 'XRP' }
                ];

                let html = '';
                mapping.forEach(coin => {
                    const price = data[coin.id].usd;
                    const change = data[coin.id].usd_24h_change;
                    const isUp = change >= 0;
                    const colorClass = isUp ? 'text-green-400' : 'text-red-400';
                    const icon = isUp ? 'fa-caret-up' : 'fa-caret-down';
                    
                    // Mini Sparkline Canvas ID
                    const canvasId = `chart-${coin.sym}`;

                    html += `
                        <div class="p-3 flex justify-between items-center hover:bg-[var(--glass-bg)] transition-colors group relative">
                            <div class="flex items-center gap-3 z-10 w-1/3">
                                <div class="w-8 h-8 rounded-full bg-[var(--glass-border)] flex items-center justify-center text-xs font-bold text-[var(--text-muted)]">${coin.sym[0]}</div>
                                <div>
                                    <div class="font-bold text-sm text-[var(--text-main)]">${coin.name}</div>
                                    <div class="text-[10px] text-[var(--text-muted)]">${coin.sym}</div>
                                </div>
                            </div>
                             <!-- Sparkline Container -->
                            <div class="w-1/3 flex justify-center opacity-60">
                                <canvas id="${canvasId}" width="60" height="24"></canvas>
                            </div>
                            <div class="text-right z-10 w-1/3">
                                <div class="font-mono text-sm text-[var(--text-main)]">$${price.toLocaleString()}</div>
                                <div class="text-xs ${colorClass} font-medium">${Math.abs(change).toFixed(2)}% <i class="fas ${icon}"></i></div>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = html;
                
                // Draw Sparklines (Simulated for visual appeal as API doesn't return history in simple endpoint)
                mapping.forEach(coin => {
                     drawSparkline(`chart-${coin.sym}`, data[coin.id].usd_24h_change >= 0);
                });

            } catch (e) {
                console.error("Crypto API Error", e);
                container.innerHTML = '<div class="p-4 text-center text-xs text-red-400">Data currently unavailable. Rate limit exceeded.</div>';
            }
        }

        // 2. AI Stocks (Simulated Live Data)
        // Initial Values
        const aiStocks = [
            { name: 'NVIDIA', sym: 'NVDA', price: 1105.00, change: 2.5, history: [] },
            { name: 'Microsoft', sym: 'MSFT', price: 425.00, change: 0.8, history: [] },
            { name: 'Alphabet', sym: 'GOOGL', price: 175.00, change: -0.4, history: [] },
            { name: 'AMD', sym: 'AMD', price: 165.00, change: 1.2, history: [] },
            { name: 'Palantir', sym: 'PLTR', price: 24.50, change: 3.8, history: [] }
        ];

        // Pre-fill history for sparklines
        aiStocks.forEach(stock => {
            let p = stock.price;
            for(let i=0; i<20; i++) {
                p = p * (1 + (Math.random() - 0.5) * 0.01);
                stock.history.push(p);
            }
        });

        function renderStocks() {
            const container = document.getElementById('stock-list');
            if (!container) return;
            
            // Only re-render structure if empty, otherwise update values in place
            if (container.innerHTML.includes("Connecting") || container.children.length === 0) {
                 container.innerHTML = '';
                 aiStocks.forEach(stock => {
                    const canvasId = `stock-chart-${stock.sym}`;
                    const html = `
                        <div class="p-3 flex justify-between items-center hover:bg-[var(--glass-bg)] transition-colors relative" id="row-${stock.sym}">
                            <div class="flex items-center gap-3 z-10 w-1/3">
                                <div class="w-8 h-8 rounded-full bg-[var(--glass-border)] flex items-center justify-center text-xs font-bold text-[var(--text-muted)]">${stock.sym[0]}</div>
                                <div>
                                    <div class="font-bold text-sm text-[var(--text-main)]">${stock.name}</div>
                                    <div class="text-[10px] text-[var(--text-muted)]">${stock.sym}</div>
                                </div>
                            </div>
                             <div class="w-1/3 flex justify-center opacity-60">
                                <canvas id="${canvasId}" width="60" height="24"></canvas>
                            </div>
                            <div class="text-right z-10 w-1/3">
                                <div class="font-mono text-sm text-[var(--text-main)] flex items-center justify-end gap-2 price-display">
                                    $${stock.price.toFixed(2)}
                                </div>
                                <div class="text-xs font-medium change-display">0.00%</div>
                            </div>
                        </div>
                    `;
                    container.innerHTML += html;
                 });
            }

            // Update Values with "Live" Ticks
            aiStocks.forEach(stock => {
                // Random walk logic
                const noise = (Math.random() - 0.5) * (stock.price * 0.0015); 
                stock.price += noise;
                
                // Update History for Sparkline
                stock.history.shift();
                stock.history.push(stock.price);

                const row = document.getElementById(`row-${stock.sym}`);
                if (row) {
                    const priceEl = row.querySelector('.price-display');
                    const changeEl = row.querySelector('.change-display');
                    
                    priceEl.innerText = `$${stock.price.toFixed(2)}`;
                    
                    // Flash color if price moved significantly this tick
                    if(Math.abs(noise) > 0.05) {
                         priceEl.classList.add(noise > 0 ? 'text-green-400' : 'text-red-400');
                         setTimeout(() => priceEl.classList.remove('text-green-400', 'text-red-400'), 500);
                    }

                    const isUp = stock.change >= 0;
                    const colorClass = isUp ? 'text-green-400' : 'text-red-400';
                    const icon = isUp ? 'fa-caret-up' : 'fa-caret-down';
                    changeEl.className = `text-xs font-medium ${colorClass} change-display`;
                    changeEl.innerHTML = `${Math.abs(stock.change).toFixed(2)}% <i class="fas ${icon}"></i>`;

                    // Redraw Sparkline
                    drawLiveSparkline(`stock-chart-${stock.sym}`, stock.history, isUp);
                }
            });
        }

        function drawSparkline(canvasId, isUp) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0,0,w,h);
            ctx.beginPath();
            
            const points = [];
            for(let i=0; i<=10; i++) {
                points.push(Math.random() * h);
            }
            
            // Ensure start and end match trend
            if (isUp) { points[0] = h; points[10] = 0; } 
            else { points[0] = 0; points[10] = h; }

            ctx.moveTo(0, points[0]);
            for(let i=1; i<=10; i++) {
                ctx.lineTo(i * (w/10), points[i]);
            }
            
            ctx.strokeStyle = isUp ? '#4ade80' : '#f87171';
            ctx.lineWidth = 1.5;
            ctx.stroke();
        }

        function drawLiveSparkline(canvasId, history, isUp) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0,0,w,h);
            
            const min = Math.min(...history);
            const max = Math.max(...history);
            const range = max - min || 1;

            ctx.beginPath();
            history.forEach((val, i) => {
                const x = (i / (history.length - 1)) * w;
                const y = h - ((val - min) / range) * h;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            
            ctx.strokeStyle = isUp ? '#4ade80' : '#f87171';
            ctx.lineWidth = 1.5;
            ctx.stroke();
        }

        // --- APP 5: MICROECONOMICS QUIZ LOGIC ---
        // Full bank of 40 Questions
        const eco110Questions = [
            { q: "If the price of coffee increases, what happens to the demand for tea (a substitute)?", o: ["Demand decreases", "Demand increases", "Quantity demanded decreases", "No change"], c: 1, e: "When the price of a substitute rises, consumers switch to the alternative, shifting demand right." },
            { q: "Which best describes 'Opportunity Cost'?", o: ["Monetary price", "Value of best alternative forgone", "Production cost", "Time taken"], c: 1, e: "Opportunity cost is the value of the next best alternative given up." },
            { q: "If a 10% price increase leads to a 20% quantity decrease, demand is:", o: ["Perfectly Inelastic", "Inelastic", "Unit Elastic", "Elastic"], c: 3, e: "Elasticity = |-20%/10%| = 2. Since 2 > 1, demand is elastic." },
            { q: "In perfect competition, firms are:", o: ["Price Makers", "Price Takers", "Monopolists", "Regulated"], c: 1, e: "Competitive firms have no market power and must accept the market price." },
            { q: "A price floor set *above* equilibrium results in:", o: ["Shortage", "Surplus", "Equilibrium", "Black markets"], c: 1, e: "A high price floor causes Quantity Supplied > Quantity Demanded (Surplus)." },
            { q: "Which cost curve always declines as output increases?", o: ["Marginal Cost", "Average Total Cost", "Average Fixed Cost", "Average Variable Cost"], c: 2, e: "AFC = TFC/Q. Since TFC is constant, increasing Q makes AFC smaller." },
            { q: "A Production Possibility Frontier (PPF) shows:", o: ["Profit maximization", "Combinations of two goods an economy can produce", "Consumer preferences", "Market equilibrium"], c: 1, e: "The PPF illustrates scarcity and trade-offs between two goods." },
            { q: "If demand is perfectly inelastic, the elasticity coefficient is:", o: ["0", "1", "Infinity", "Between 0 and 1"], c: 0, e: "Perfectly inelastic demand means quantity doesn't change with price (Vertical line)." },
            { q: "Marginal Utility is:", o: ["Total satisfaction", "Change in total utility from one more unit", "Utility per dollar", "Average utility"], c: 1, e: "Marginal means 'additional'. It's the extra utility from consuming one more unit." },
            { q: "In the long run, all costs are:", o: ["Fixed", "Variable", "Sunk", "Marginal"], c: 1, e: "In the long run, firms can adjust all inputs (capital, land), so no costs are fixed." },
            { q: "A public good is:", o: ["Rival and Excludable", "Non-rival and Excludable", "Rival and Non-excludable", "Non-rival and Non-excludable"], c: 3, e: "Public goods (like national defense) can be used by everyone simultaneously without excluding anyone." },
            { q: "The Law of Diminishing Returns applies in:", o: ["The Short Run", "The Long Run", "Both", "Neither"], c: 0, e: "It occurs when variable inputs are added to a fixed input (capital), which only exists in the short run." },
            { q: "If cross-price elasticity is negative, the goods are:", o: ["Substitutes", "Complements", "Inferior", "Normal"], c: 1, e: "Negative cross-elasticity means price of A goes up, quantity of B goes down (e.g., Coffee and Sugar)." },
            { q: "Consumer Surplus is the area:", o: ["Below demand, above price", "Above supply, below price", "Below demand, above supply", "Below price, above zero"], c: 0, e: "It represents the difference between what consumers are willing to pay and what they actually pay." },
            { q: "Deadweight Loss is largest when demand is:", o: ["Inelastic", "Elastic", "Perfectly Inelastic", "Unit Elastic"], c: 1, e: "Taxes cause larger distortions (quantity reductions) when consumers are very responsive (elastic) to price changes." },
            { q: "Which market structure has a kinked demand curve?", o: ["Perfect Competition", "Monopoly", "Oligopoly", "Monopolistic Competition"], c: 2, e: "Oligopolists match price cuts but ignore price hikes, creating a kink." },
            { q: "If Income Elasticity is positive but less than 1, the good is:", o: ["Luxury", "Normal (Necessity)", "Inferior", "Giffen"], c: 1, e: "Positive means Normal. Less than 1 means expenditure grows slower than income (Necessity)." },
            { q: "Profit maximization occurs where:", o: ["MR > MC", "MR < MC", "MR = MC", "P = ATC"], c: 2, e: "Firms produce up to the point where the revenue from the last unit equals its cost." },
            { q: "A negative externality leads to a market quantity that is:", o: ["Too low", "Too high", "Efficient", "Zero"], c: 1, e: "The market ignores the external cost, leading to overproduction compared to the social optimum." },
            { q: "The Coase Theorem suggests externalities can be solved by:", o: ["Taxes", "Subsidies", "Private bargaining", "Regulation"], c: 2, e: "If property rights are clear and transaction costs low, parties can bargain to an efficient outcome." },
            { q: "Total Revenue is maximized when demand elasticity is:", o: ["Elastic", "Inelastic", "Unit Elastic", "Zero"], c: 2, e: "At Unit Elasticity (Ed=1), marginal revenue is zero, maximizing total revenue." },
            { q: "Which is NOT a barrier to entry?", o: ["Patents", "Economies of Scale", "Control of resources", "U-shaped Average Cost"], c: 3, e: "U-shaped average cost is typical for all firms and doesn't prevent entry." },
            { q: "In Monopolistic Competition, in the long run, firms make:", o: ["Positive Economic Profit", "Zero Economic Profit", "Losses", "Monopoly Profits"], c: 1, e: "Easy entry/exit drives profits to zero (normal profit) in the long run." },
            { q: "The Gini Coefficient measures:", o: ["Inflation", "Unemployment", "Income Inequality", "GDP Growth"], c: 2, e: "0 is perfect equality, 1 is perfect inequality." },
            { q: "Moral Hazard occurs when:", o: ["Buyers know more than sellers", "Sellers know more than buyers", "Insured parties take more risks", "Adverse selection happens"], c: 2, e: "After a transaction (like insurance), one party alters behavior because they are protected from risk." },
            { q: "An indifference curve shows:", o: ["Prices of two goods", "Combinations yielding equal utility", "Maximum production", "Budget constraints"], c: 1, e: "Points on the curve represent bundles that give the consumer the same level of satisfaction." },
            { q: "The slope of the Budget Line represents:", o: ["Marginal Utility", "Relative Prices", "Income", "Preferences"], c: 1, e: "The slope is -Px/Py, representing the trade-off ratio between goods based on prices." },
            { q: "If MPL > APL, then:", o: ["APL is rising", "APL is falling", "APL is constant", "MPL is falling"], c: 0, e: "If the marginal unit pulls the average up, the average must be rising." },
            { q: "Shut-down point in short run is where P equals:", o: ["MC", "ATC", "AVC", "AFC"], c: 2, e: "If Price < AVC, the firm loses more by operating than by shutting down." },
            { q: "Price discrimination requires:", o: ["Market Power", "Ability to separate markets", "No resale", "All of the above"], c: 3, e: "Firms need power to set prices and must prevent arbitrage." },
            { q: "A pure public good is:", o: ["Non-rival, Non-excludable", "Rival, Excludable", "Rival, Non-excludable", "Non-rival, Excludable"], c: 0, e: "Definition of pure public good." },
            { q: "Tragedy of the Commons involves resources that are:", o: ["Excludable, Rival", "Non-excludable, Rival", "Excludable, Non-rival", "Non-excludable, Non-rival"], c: 1, e: "Like fish in the ocean: anyone can take them (non-excludable), but one person's use reduces another's (rival)." },
            { q: "A tariff usually:", o: ["Increases consumer surplus", "Increases total surplus", "Creates deadweight loss", "Lowers domestic price"], c: 2, e: "Tariffs distort prices, reducing consumption and efficiency." },
            { q: "The 'invisible hand' concept was introduced by:", o: ["Keynes", "Ricardo", "Smith", "Marx"], c: 2, e: "Adam Smith in 'The Wealth of Nations'." },
            { q: "If two goods are perfect complements, indifference curves are:", o: ["Linear", "L-shaped", "Concave", "Convex"], c: 1, e: "You consume them in fixed proportions (e.g., left and right shoes)." },
            { q: "Diminishing Marginal Utility implies demand curves are:", o: ["Upward sloping", "Downward sloping", "Horizontal", "Vertical"], c: 1, e: "As you consume more, you value the next unit less, so you only buy it at a lower price." },
            { q: "A natural monopoly arises due to:", o: ["Legal barriers", "Economies of Scale", "Network effects", "Collusion"], c: 1, e: "One firm can supply the market at lower ATC than multiple firms." },
            { q: "Changes in Tastes/Preferences shift the:", o: ["Supply Curve", "Demand Curve", "Both", "Neither"], c: 1, e: "Tastes are a determinant of demand." },
            { q: "Producer Surplus is area:", o: ["Above supply, below price", "Below supply, above price", "Above demand", "Below demand"], c: 0, e: "Difference between market price and marginal cost." },
            { q: "Which market structure maximizes Total Surplus?", o: ["Monopoly", "Oligopoly", "Perfect Competition", "Monopsony"], c: 2, e: "Perfect competition achieves allocative efficiency (P=MC)." }
        ];

        const mat100Questions = [
            { q: "In set theory, the intersection of sets A and B (A ∩ B) contains elements that are:", o: ["In A or B", "In A only", "In B only", "In both A and B"], c: 3, e: "Intersection is the set of elements common to both sets." },
            { q: "If P(A) = 0.4, P(B) = 0.5, and A and B are independent, P(A and B) is:", o: ["0.9", "0.2", "0.1", "0.45"], c: 1, e: "For independent events, P(A and B) = P(A) * P(B) = 0.4 * 0.5 = 0.2." },
            { q: "The transpose of a 2x3 matrix will have dimensions:", o: ["2x3", "3x2", "2x2", "3x3"], c: 1, e: "Transposing swaps rows and columns, so MxN becomes NxM." },
            { q: "In a linear programming problem, the feasible region is defined by:", o: ["The objective function", "The constraints", "The corner points", "The shadow price"], c: 1, e: "Constraints limit the possible solutions, forming the feasible region." },
            { q: "Which of the following is a measure of central tendency?", o: ["Variance", "Standard Deviation", "Median", "Range"], c: 2, e: "Median represents the middle value, a central point." },
            { q: "In a standard deck of 52 cards, probability of drawing a King is:", o: ["1/13", "1/52", "1/4", "1/2"], c: 0, e: "There are 4 Kings in 52 cards. 4/52 = 1/13." },
            { q: "If Matrix A is 2x2 and Matrix B is 2x2, A+B is possible:", o: ["Always", "Never", "Only if A=B", "Only if determinants are equal"], c: 0, e: "Matrix addition requires identical dimensions." },
            { q: "Permutations order matters. Combinations order:", o: ["Matters", "Does not matter", "Is reversed", "Is random"], c: 1, e: "Combinations are selections where order is irrelevant (e.g., a committee)." },
            { q: "The identity matrix I must be:", o: ["Rectangular", "Square", "Zero everywhere", "Diagonal with 0s"], c: 1, e: "Identity matrices are square with 1s on the diagonal." },
            { q: "In simple interest, I = Prt. If P=100, r=0.05, t=2, Interest is:", o: ["5", "10", "10.25", "105"], c: 1, e: "I = 100 * 0.05 * 2 = 10." },
            { q: "Slope of line passing through (1,2) and (3,6) is:", o: ["1", "2", "3", "4"], c: 1, e: "m = (y2-y1)/(x2-x1) = (6-2)/(3-1) = 4/2 = 2." },
            { q: "Markov Chains use a matrix of:", o: ["Payoffs", "Transition probabilities", "Costs", "Variables"], c: 1, e: "They model transitions between states with probabilities." },
            { q: "If two lines are parallel, their slopes are:", o: ["Equal", "Negative reciprocals", "Zero", "Undefined"], c: 0, e: "Parallel lines never intersect and rise at the same rate." },
            { q: "The union of disjoint sets A and B has size:", o: ["n(A) + n(B)", "n(A) * n(B)", "n(A) - n(B)", "0"], c: 0, e: "Since intersection is empty, Union size is sum of individual sizes." },
            { q: "An objective function in LP is usually to:", o: ["Maximize or Minimize", "Equalize", "Integrate", "Differentiate"], c: 0, e: "LP seeks to optimize (max profit or min cost)." },
            { q: "Probability of rolling a 7 with two dice is:", o: ["1/6", "1/36", "1/12", "1/2"], c: 0, e: "6 combinations (1,6; 2,5; 3,4; 4,3; 5,2; 6,1) out of 36. 6/36 = 1/6." },
            { q: "A subset is a set contained:", o: ["Within another set", "Outside another set", "Intersecting another", "Equal to universal"], c: 0, e: "Definition of subset." },
            { q: "The inverse of a matrix A exists only if det(A) is:", o: ["Zero", "Non-zero", "Positive", "Negative"], c: 1, e: "If determinant is zero, matrix is singular (no inverse)." },
            { q: "Bayes' Theorem relates:", o: ["Conditional probabilities", "Independent events", "Mutually exclusive events", "Linear equations"], c: 0, e: "It calculates P(A|B) using P(B|A)." },
            { q: "In compound interest, A = P(1+i)^n. n represents:", o: ["Rate", "Principal", "Number of periods", "Inflation"], c: 2, e: "n is total compounding periods." }
            // ... (Duplicate or add more to reach 40)
        ];

        const mat110Questions = [
            { q: "The derivative of f(x) = x^2 is:", o: ["x", "2x", "x^3/3", "2"], c: 1, e: "Power rule: d/dx (x^n) = nx^(n-1)." },
            { q: "The limit of 1/x as x approaches infinity is:", o: ["Infinity", "1", "0", "Undefined"], c: 2, e: "As the denominator grows infinitely large, the fraction approaches zero." },
            { q: "The integral of 2x dx is:", o: ["x^2 + C", "2x^2 + C", "x + C", "2"], c: 0, e: "Reverse power rule: integral of x^n is x^(n+1)/(n+1)." },
            { q: "If f'(x) > 0, the function f(x) is:", o: ["Increasing", "Decreasing", "Constant", "Undefined"], c: 0, e: "A positive derivative indicates a positive slope." },
            { q: "The derivative of sin(x) is:", o: ["cos(x)", "-cos(x)", "sin(x)", "-sin(x)"], c: 0, e: "Standard derivative." },
            { q: "A critical point occurs where f'(x) is:", o: ["Positive", "Negative", "Zero or undefined", "Infinity"], c: 2, e: "Critical points are potential local maxima or minima." },
            { q: "The second derivative f''(x) tells us about:", o: ["Slope", "Concavity", "Intercept", "Domain"], c: 1, e: "Positive f'' means concave up; negative means concave down." },
            { q: "The chain rule is used for differentiating:", o: ["Sums", "Products", "Composite functions", "Quotients"], c: 2, e: "d/dx f(g(x)) = f'(g(x)) * g'(x)." },
            { q: "The area under a curve y=f(x) from a to b is given by:", o: ["Derivative", "Definite Integral", "Limit", "Slope"], c: 1, e: "The fundamental theorem of calculus connects integration and area." },
            { q: "If f(x) is continuous on [a,b], it must have:", o: ["A derivative", "An inverse", "A max and min", "A root"], c: 2, e: "Extreme Value Theorem." },
            { q: "The derivative of e^x is:", o: ["x*e^(x-1)", "e^x", "ln(x)", "1/x"], c: 1, e: "e^x is its own derivative." },
            { q: "L'Hopital's Rule is used for limits of the form:", o: ["0/0 or inf/inf", "0/inf", "1/0", "Any limit"], c: 0, e: "Indeterminate forms." },
            { q: "The slope of the tangent line to y=f(x) at x=c is:", o: ["f(c)", "f'(c)", "f''(c)", "F(c)"], c: 1, e: "Definition of the derivative at a point." },
            { q: "Integration by parts is based on the:", o: ["Chain Rule", "Product Rule", "Quotient Rule", "Power Rule"], c: 1, e: "Reverse product rule." },
            { q: "If f''(x) < 0, the graph is:", o: ["Concave Up", "Concave Down", "Increasing", "Decreasing"], c: 1, e: "Downward curvature." },
            { q: "The derivative of ln(x) is:", o: ["e^x", "1/x", "x", "ln(x)"], c: 1, e: "Standard derivative for x > 0." },
            { q: "An inflection point is where:", o: ["f'(x) changes sign", "f''(x) changes sign", "f(x) = 0", "f'(x) = 0"], c: 1, e: "Change in concavity." },
            { q: "The Fundamental Theorem of Calculus relates:", o: ["Limits and Continuity", "Differentiation and Integration", "Algebra and Geometry", "Functions and Relations"], c: 1, e: "It connects the two main branches of calculus." },
            { q: "Implicit differentiation is used when:", o: ["y is not isolated", "x is constant", "f(x) is linear", "We integrate"], c: 0, e: "When y cannot be explicitly solved for x." },
            { q: "The average value of f(x) on [a,b] involves:", o: ["1/(b-a) * integral", "b-a * integral", "integral / 2", "derivative at midpoint"], c: 0, e: "Formula for average value." }
        ];

        let currentQuiz = [];
        let currentIndex = 0;
        let currentScore = 0;
        let isAnswered = false;
        let currentMode = 'eco110'; // 'eco110', 'mat100', 'mat110'

        function startQuiz(numQuestions, mode) {
            currentMode = mode;
            let bank;
            if (mode === 'eco110') bank = eco110Questions;
            else if (mode === 'mat100') bank = mat100Questions;
            else bank = mat110Questions; // mat110
            
            // Randomly select questions
            const shuffled = [...bank].sort(() => 0.5 - Math.random());
            currentQuiz = shuffled.slice(0, numQuestions);
            
            currentIndex = 0;
            currentScore = 0;
            isAnswered = false;
            
            const prefix = (mode === 'eco110') ? '' : (mode === 'mat100' ? 'mat-' : 'mat110-'); 
            
            // Check if elements exist before accessing classList
            const setupEl = document.getElementById(prefix + 'quiz-setup');
            if (setupEl) setupEl.classList.add('hidden');
            
            const containerEl = document.getElementById(prefix + 'quiz-container');
            if (containerEl) containerEl.classList.remove('hidden');
            
            const scoreDisplay = document.getElementById(prefix + 'score-display');
            if (scoreDisplay) scoreDisplay.style.display = 'block';
            
            const scoreEl = document.getElementById(prefix + 'quiz-score');
            if (scoreEl) scoreEl.innerText = `0 / ${numQuestions}`;
            
            loadQuizQuestion(prefix);
        }

        function loadQuizQuestion(prefix) {
            if (currentIndex >= currentQuiz.length) return; // Safety check
            const q = currentQuiz[currentIndex];
            const questionEl = document.getElementById(prefix + 'quiz-question');
            if (questionEl) questionEl.innerText = `Q${currentIndex + 1}: ${q.q}`;
            
            // Progress Bar
            const progress = (currentIndex / currentQuiz.length) * 100;
            const progressEl = document.getElementById(prefix + 'quiz-progress');
            if (progressEl) progressEl.style.width = `${progress}%`;
            
            const optionsDiv = document.getElementById(prefix + 'quiz-options');
            if (optionsDiv) {
                optionsDiv.innerHTML = '';
                q.o.forEach((opt, index) => {
                    const btn = document.createElement('button');
                    btn.className = "w-full text-left p-4 rounded-lg border border-[var(--glass-border)] bg-[var(--glass-bg)] transition-all duration-200 text-base text-[var(--text-muted)] hover:text-[var(--text-main)] group flex items-center gap-3";
                    if(prefix === 'mat-') {
                         btn.classList.add('hover:border-blue-500/50', 'hover:bg-blue-500/5');
                    } else if (prefix === 'mat110-') {
                         btn.classList.add('hover:border-green-500/50', 'hover:bg-green-500/5');
                    } else {
                         btn.classList.add('hover:border-orange-500/50', 'hover:bg-orange-500/5');
                    }

                    btn.innerHTML = `<span class="w-6 h-6 rounded-full border border-[var(--glass-border)] flex items-center justify-center text-xs text-[var(--text-muted)] transition-colors">${String.fromCharCode(65+index)}</span> <span>${opt}</span>`;
                    btn.onclick = () => submitAnswer(index, btn, prefix);
                    optionsDiv.appendChild(btn);
                });
            }

            // Reset Feedback
            const feedbackEl = document.getElementById(prefix + 'quiz-feedback');
            if (feedbackEl) feedbackEl.classList.add('hidden');
            
            const nextBtn = document.getElementById(prefix + 'next-btn');
            if (nextBtn) {
                nextBtn.disabled = true;
                nextBtn.innerText = "Next Question";
                nextBtn.style.display = 'block'; 
                if(currentIndex === currentQuiz.length - 1) {
                    nextBtn.innerText = "Finish Quiz";
                }
            }
            isAnswered = false;
        }

        function submitAnswer(selectedIndex, btnElement, prefix) {
            if (isAnswered) return;
            isAnswered = true;

            const q = currentQuiz[currentIndex];
            const feedback = document.getElementById(prefix + 'quiz-feedback');
            const title = document.getElementById(prefix + 'feedback-title');
            const text = document.getElementById(prefix + 'feedback-text');
            const icon = document.getElementById(prefix + 'feedback-icon');
            const optionsDiv = document.getElementById(prefix + 'quiz-options');
            const allBtns = optionsDiv ? optionsDiv.children : [];
            
            if (selectedIndex === q.c) {
                currentScore++;
                btnElement.classList.add('bg-green-500/20', 'border-green-500');
                if (title) {
                    title.innerText = "Correct!";
                    title.className = "font-bold mb-1 text-green-400";
                }
                if (icon) icon.innerHTML = '<i class="fas fa-check-circle text-2xl text-green-500"></i>';
                if (feedback) feedback.className = "p-5 rounded-xl border border-green-500/30 bg-green-900/10 block";
            } else {
                btnElement.classList.add('bg-red-500/20', 'border-red-500');
                if (allBtns[q.c]) allBtns[q.c].classList.add('bg-green-500/20', 'border-green-500'); 
                if (title) {
                    title.innerText = "Incorrect";
                    title.className = "font-bold mb-1 text-red-400";
                }
                if (icon) icon.innerHTML = '<i class="fas fa-times-circle text-2xl text-red-500"></i>';
                if (feedback) feedback.className = "p-5 rounded-xl border border-red-500/30 bg-red-900/10 block";
            }

            if (text) text.innerText = q.e;
            const scoreEl = document.getElementById(prefix + 'quiz-score');
            if (scoreEl) scoreEl.innerText = `${currentScore} / ${currentQuiz.length}`;
            
            const nextBtn = document.getElementById(prefix + 'next-btn');
            if (nextBtn) nextBtn.disabled = false;
            
            if (feedback) feedback.classList.remove('hidden');
        }

        function nextQuestion() {
            const prefix = (currentMode === 'eco110') ? '' : (currentMode === 'mat100' ? 'mat-' : 'mat110-');
            currentIndex++;
            if (currentIndex < currentQuiz.length) {
                loadQuizQuestion(prefix);
            } else {
                // End Screen
                const progressEl = document.getElementById(prefix + 'quiz-progress');
                if (progressEl) progressEl.style.width = `100%`;
                
                const questionEl = document.getElementById(prefix + 'quiz-question');
                if (questionEl) questionEl.innerText = "Practice Complete!";
                
                let colorClass = 'text-orange-400 border-orange-500/30 bg-orange-500/10';
                if (prefix === 'mat-') colorClass = 'text-blue-400 border-blue-500/30 bg-blue-500/10';
                if (prefix === 'mat110-') colorClass = 'text-green-400 border-green-500/30 bg-green-500/10';
                
                const optionsDiv = document.getElementById(prefix + 'quiz-options');
                if (optionsDiv) {
                    optionsDiv.innerHTML = `
                        <div class="text-center p-8 flex flex-col items-center justify-center h-48">
                            <p class="text-[var(--text-muted)] mb-2 text-sm">Final Score</p>
                            <p class="text-5xl font-bold text-white mb-4">${currentScore} <span class="text-2xl text-[var(--text-muted)]">/ ${currentQuiz.length}</span></p>
                            <p class="text-sm ${colorClass} px-4 py-2 rounded-full">${currentScore === currentQuiz.length ? 'Perfect Score! 🌟' : 'Keep Practicing!'} </p>
                        </div>
                    `;
                }
                
                const feedbackEl = document.getElementById(prefix + 'quiz-feedback');
                if (feedbackEl) feedbackEl.classList.add('hidden');
                
                const nextBtn = document.getElementById(prefix + 'next-btn');
                if (nextBtn) nextBtn.style.display = 'none';
            }
        }

        function resetQuizSetup() {
            const prefix = (currentMode === 'eco110') ? '' : (currentMode === 'mat100' ? 'mat-' : 'mat110-');
            const setupEl = document.getElementById(prefix + 'quiz-setup');
            if (setupEl) setupEl.classList.remove('hidden');
            
            const containerEl = document.getElementById(prefix + 'quiz-container');
            if (containerEl) containerEl.classList.add('hidden');
            
            const scoreDisplay = document.getElementById(prefix + 'score-display');
            if (scoreDisplay) scoreDisplay.style.display = 'none';
        }

        // Navigation override/hook
        const oldNav = navigateTo;
        // We need to update navigateTo to handle mat100-practice too
        function navigateTo(sectionId) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            const target = document.getElementById(sectionId);
            if(target) target.classList.add('active');

            // Update Buttons
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            let activeBtnId = 'nav-' + sectionId;
            if (sectionId.startsWith('blog-post')) activeBtnId = 'nav-blog';
            // Keep Teaching active for subpages
            if (sectionId === 'eco110-practice' || sectionId === 'mat100-practice' || sectionId === 'mat110-practice') activeBtnId = 'nav-teaching'; 
            
            const activeBtn = document.getElementById(activeBtnId);
            if(activeBtn) activeBtn.classList.add('active');

            // Close mobile menu
            const mobileMenu = document.getElementById('mobile-menu');
            if (!mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }

            if (sectionId === 'research') setTimeout(drawChart, 100);
            if (sectionId === 'applications') {
                setTimeout(calculateCompound, 100);
                setTimeout(runMonteCarlo, 100);
                setTimeout(() => {
                    fetchCryptoData();
                    renderStocks();
                }, 200);
            }
            
            // Reset quiz setups
            if (sectionId === 'eco110-practice') {
                currentMode = 'eco110';
                resetQuizSetup();
            }
            if (sectionId === 'mat100-practice') {
                currentMode = 'mat100';
                resetQuizSetup();
            }
             if (sectionId === 'mat110-practice') {
                currentMode = 'mat110';
                resetQuizSetup();
            }

            moveCameraForSection(sectionId);
            window.scrollTo(0,0);
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Initial Fetch & Intervals
        setInterval(renderStocks, 1500);
        setInterval(fetchCryptoData, 60000); 

        // --- 3. THREE.JS 3D BACKGROUND ---
        // Restored logic
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        let sphereMaterial;
        let particlesMaterial;
        let lineMaterial;

        const geometry = new THREE.IcosahedronGeometry(10, 2);
        sphereMaterial = new THREE.MeshBasicMaterial({ 
            color: 0xffffff, 
            wireframe: true,
            transparent: true,
            opacity: 0.03 
        });
        const sphere = new THREE.Mesh(geometry, sphereMaterial);
        scene.add(sphere);

        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 700;
        const posArray = new Float32Array(particlesCount * 3);

        for(let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 60; 
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        particlesMaterial = new THREE.PointsMaterial({
            size: 0.05,
            color: 0xffffff,
            transparent: true,
            opacity: 0.8,
        });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        const linesGroup = new THREE.Group();
        const linesArray = [];
        
        for(let i=0; i<5; i++) {
            const lineGeo = new THREE.BufferGeometry();
            const points = [];
            points.push(new THREE.Vector3((Math.random()-0.5)*30, (Math.random()-0.5)*30, (Math.random()-0.5)*30));
            points.push(new THREE.Vector3((Math.random()-0.5)*30, (Math.random()-0.5)*30, (Math.random()-0.5)*30));
            lineGeo.setFromPoints(points);
            lineMaterial = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.2 });
            const line = new THREE.Line(lineGeo, lineMaterial);
            linesGroup.add(line);
            linesArray.push(line);
        }
        scene.add(linesGroup);

        // Fix: Restore camera position
        camera.position.z = 20;
        
        // Fix: Mouse interaction
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        });

        let cameraTargetZ = 20;
        let cameraTargetX = 0;

        function moveCameraForSection(id) {
            if(id === 'home') { cameraTargetZ = 20; cameraTargetX = 0; }
            if(id === 'research') { cameraTargetZ = 25; cameraTargetX = 5; }
            if(id === 'teaching') { cameraTargetZ = 22; cameraTargetX = -3; }
            if(id === 'publications') { cameraTargetZ = 25; cameraTargetX = -5; }
            if(id === 'applications') { cameraTargetZ = 15; cameraTargetX = 8; } 
            if(id === 'blog' || id.startsWith('blog-post')) { cameraTargetZ = 30; cameraTargetX = 0; }
            if(id === 'contacts') { cameraTargetZ = 35; cameraTargetX = 0; }
        }

        const clock = new THREE.Clock();

        function animate() {
            const elapsedTime = clock.getElapsedTime();

            targetX = mouseX * 0.001;
            targetY = mouseY * 0.001;

            sphere.rotation.y += 0.002;
            sphere.rotation.x += 0.001;

            particlesMesh.rotation.y = -mouseX * 0.00005;
            particlesMesh.rotation.x = -mouseY * 0.00005;

            camera.position.z += (cameraTargetZ - camera.position.z) * 0.05;
            camera.position.x += (cameraTargetX - camera.position.x) * 0.05;
            
            sphere.rotation.y += 0.05 * (targetX - sphere.rotation.y);
            sphere.rotation.x += 0.05 * (targetY - sphere.rotation.x);

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        // Start loop
        animate();

        // Resize listener
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });


        // Theme Helper
        function updateThreeJSTheme(mode) {
            if (mode === 'light') {
                if(scene.fog) scene.fog.color.setHex(0xfafafa);
                if(sphereMaterial) sphereMaterial.color.setHex(0x171717);
                if(particlesMaterial) particlesMaterial.color.setHex(0x171717);
                linesArray.forEach(l => l.material.color.setHex(0x171717));
            } else {
                if(scene.fog) scene.fog.color.setHex(0x050505);
                if(sphereMaterial) sphereMaterial.color.setHex(0xffffff);
                if(particlesMaterial) particlesMaterial.color.setHex(0xffffff);
                linesArray.forEach(l => l.material.color.setHex(0xffffff));
            }
        }

        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('theme-icon');
            const iconMobile = document.getElementById('theme-icon-mobile');
            
            if (html.classList.contains('light')) {
                html.classList.remove('light');
                html.classList.add('dark');
                if(icon) {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
                if(iconMobile) {
                    iconMobile.classList.remove('fa-sun');
                    iconMobile.classList.add('fa-moon');
                }
                localStorage.setItem('theme', 'dark');
                updateThreeJSTheme('dark');
            } else {
                html.classList.remove('dark');
                html.classList.add('light');
                if(icon) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                }
                 if(iconMobile) {
                    iconMobile.classList.remove('fa-moon');
                    iconMobile.classList.add('fa-sun');
                }
                localStorage.setItem('theme', 'light');
                updateThreeJSTheme('light');
            }
        }

        // Initial load logic
        window.onload = () => {
             const path = window.location.hash.substring(1) || 'home';
             navigateTo(path);
             
             // Restore theme from local storage or default to dark
             const savedTheme = localStorage.getItem('theme') || 'dark';
             const html = document.documentElement;
             const icon = document.getElementById('theme-icon');
             const iconMobile = document.getElementById('theme-icon-mobile');

             if (savedTheme === 'light') {
                 html.classList.remove('dark');
                 html.classList.add('light');
                 if(icon) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                 }
                 if(iconMobile) {
                     iconMobile.classList.remove('fa-moon');
                     iconMobile.classList.add('fa-sun');
                 }
                 updateThreeJSTheme('light');
             } else {
                 html.classList.remove('light');
                 html.classList.add('dark');
                 if(icon) {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                 }
                 if(iconMobile) {
                    iconMobile.classList.remove('fa-sun');
                    iconMobile.classList.add('fa-moon');
                 }
                 updateThreeJSTheme('dark');
             }
        };
    </script>
</body>
</html>
